<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êù±Êµ∑ÈÅì‰∫îÂçÅ‰∏âÊ¨°„Åô„Åî„Çç„Åè„Ç≤„Éº„É†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }

        .game-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            color: #333;
        }

        .game-title {
            text-align: center;
            font-size: 2.8em;
            color: #8B0000;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .game-subtitle {
            text-align: center;
            font-size: 1.3em;
            color: #8B4513;
            margin-bottom: 30px;
            font-style: italic;
        }

        .game-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .info-card {
            background: linear-gradient(45deg, #fff8dc, #f0e68c);
            border: 2px solid #DAA520;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .info-card h3 {
            color: #8B4513;
            font-size: 1.1em;
            margin-bottom: 8px;
        }

        .info-card .value {
            font-size: 1.8em;
            font-weight: bold;
            color: #8B0000;
        }

        .game-board {
            background: linear-gradient(45deg, #f5f5dc, #fffacd);
            border: 3px solid #8B4513;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            position: relative;
        }

        .stations-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .station {
            background: #fff;
            border: 2px solid #ddd;
            border-radius: 12px;
            padding: 8px 4px;
            text-align: center;
            font-size: 0.85em;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .station:hover {
            background: #fffacd;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .station.current {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border-color: #FF8C00;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            transform: scale(1.1);
        }

        .station.visited {
            background: linear-gradient(45deg, #90EE90, #98FB98);
            border-color: #228B22;
        }

        .station.special {
            background: linear-gradient(45deg, #FFB6C1, #FFC0CB);
            border-color: #DC143C;
        }

        .station-number {
            font-size: 0.7em;
            color: #666;
            margin-bottom: 2px;
        }

        .station-name {
            font-weight: bold;
            color: #333;
            font-size: 0.9em;
        }

        .player-token {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #FF4500;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .dice-area {
            text-align: center;
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(45deg, #f0f8ff, #e6f3ff);
            border-radius: 15px;
            border: 2px solid #4169E1;
        }

        .dice {
            font-size: 4em;
            margin: 15px;
            padding: 20px;
            background: white;
            border: 3px solid #333;
            border-radius: 15px;
            display: inline-block;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .dice.rolling {
            animation: roll 0.5s ease-in-out;
        }

        @keyframes roll {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(180deg); }
            75% { transform: rotate(270deg); }
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(45deg, #8B4513, #A0522D);
            color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-primary:hover {
            background: linear-gradient(45deg, #654321, #8B4513);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #DAA520, #FFD700);
            color: #8B4513;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-secondary:hover {
            background: linear-gradient(45deg, #B8860B, #DAA520);
            transform: translateY(-2px);
        }

        .event-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            border: 4px solid #8B4513;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            max-width: 400px;
            text-align: center;
            display: none;
        }

        .event-popup h3 {
            color: #8B0000;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .event-popup p {
            color: #333;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .progress-bar {
            background: #ddd;
            border-radius: 10px;
            padding: 3px;
            margin: 20px 0;
        }

        .progress-fill {
            background: linear-gradient(45deg, #4CAF50, #8BC34A);
            height: 20px;
            border-radius: 8px;
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.9em;
            font-weight: bold;
        }

        .rules-section {
            background: linear-gradient(45deg, #f9f5dc, #fff8dc);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            border-left: 5px solid #8B4513;
        }

        .rules-section h3 {
            color: #8B4513;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .rules-section ul {
            margin-left: 20px;
            color: #654321;
        }

        .rules-section li {
            margin-bottom: 8px;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .game-title {
                font-size: 2.2em;
            }
            
            .stations-grid {
                grid-template-columns: repeat(6, 1fr);
                gap: 6px;
            }
            
            .station {
                font-size: 0.75em;
                min-height: 50px;
                padding: 6px 2px;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <!--
    AI Model: Claude Sonnet 4
    User Prompt: Âà•„ÅÆ„Éá„Ç£„É¨„ÇØ„Éà„É™„Çí‰Ωú„Çä„ÄÅÊù±Êµ∑ÈÅì53Ê¨°„Å´Èñ¢„Åô„Çã„Ç≤„Éº„É†„ÇíÊñ∞„Åü„Å´‰Ωú„Å£„Å¶„Åè„Å†„Åï„ÅÑ
    AI Approach: Êù±Êµ∑ÈÅì‰∫îÂçÅ‰∏âÊ¨°„Çí„ÉÜ„Éº„Éû„Å´„Åó„Åü„Åô„Åî„Çç„ÅèÂΩ¢Âºè„ÅÆ„Ç≤„Éº„É†„ÄÇÊ≠åÂ∑ùÂ∫ÉÈáç„ÅÆÊµÆ‰∏ñÁµµ„ÅßÊúâÂêç„Å™53„ÅÆÂÆøÂ†¥Áî∫„ÇíÊ±üÊà∏„Åã„Çâ‰∫¨ÈÉΩ„Åæ„ÅßÊóÖ„Åô„Çã
    Implementation Intent: Êó•Êú¨„ÅÆÊ≠¥Âè≤„ÉªÊñáÂåñ„ÇíÂ≠¶„Å≥„Å™„Åå„ÇâÊ•Ω„Åó„ÇÅ„ÇãÊïôËÇ≤ÁöÑ„Åô„Åî„Çç„Åè„Ç≤„Éº„É†„ÄÇÂÆüÈöõ„ÅÆÂÆøÂ†¥Áî∫„Éá„Éº„Çø„Å®ÁâπÂà•„Ç§„Éô„É≥„Éà„ÅßÊ±üÊà∏ÊôÇ‰ª£„ÅÆÊóÖË∑Ø„Çí‰ΩìÈ®ì
    -->

    <div class="game-container">
        <h1 class="game-title">üèÆ Êù±Êµ∑ÈÅì‰∫îÂçÅ‰∏âÊ¨°„Åô„Åî„Çç„Åè üèÆ</h1>
        <p class="game-subtitle">Ê±üÊà∏„Åã„Çâ‰∫¨ÈÉΩ„Åæ„Åß53„ÅÆÂÆøÂ†¥Áî∫„ÇíÂ∑°„ÇãÂ§ßÂÜíÈô∫ÔºÅ</p>

        <div class="game-info">
            <div class="info-card">
                <h3>ÁèæÂú®Âú∞</h3>
                <div class="value" id="current-station">Ê±üÊà∏„ÉªÊó•Êú¨Ê©ã</div>
            </div>
            <div class="info-card">
                <h3>ÂÆøÂ†¥Êï∞</h3>
                <div class="value"><span id="station-count">1</span>/55</div>
            </div>
            <div class="info-card">
                <h3>ÊâÄÊåÅÈáë</h3>
                <div class="value" id="money">1000‰∏°</div>
            </div>
            <div class="info-card">
                <h3>Êó•Êï∞</h3>
                <div class="value" id="days">0Êó•</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress" style="width: 2%;">
                ÊóÖË∑ØÈÄ≤Ë°åÂ∫¶
            </div>
        </div>

        <div class="game-board">
            <div class="stations-grid" id="stations-grid">
                <!-- ÂÆøÂ†¥Áî∫„ÅØJavaScript„ÅßÂãïÁöÑÁîüÊàê -->
            </div>
        </div>

        <div class="dice-area">
            <div class="dice" id="dice">üé≤</div>
            <div style="margin-top: 15px;">
                <button class="btn btn-primary" id="roll-btn" onclick="rollDice()">üé≤ „Çµ„Ç§„Ç≥„É≠„ÇíÊåØ„Çã</button>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-secondary" onclick="showStationInfo()">üóæ ÂÆøÂ†¥ÊÉÖÂ†±</button>
            <button class="btn btn-secondary" onclick="showInventory()">üéí ÊåÅ„Å°Áâ©</button>
            <button class="btn btn-secondary" onclick="showProgress()">üìä ÈÄ≤Ë°åÁä∂Ê≥Å</button>
            <button class="btn btn-primary" onclick="resetGame()">üîÑ Êñ∞„Åó„ÅÑÊóÖ</button>
        </div>

        <div class="rules-section">
            <h3>üéØ „Ç≤„Éº„É†„É´„Éº„É´</h3>
            <ul>
                <li>üé≤ „Çµ„Ç§„Ç≥„É≠„ÇíÊåØ„Å£„Å¶Êù±Êµ∑ÈÅì„ÇíÈÄ≤„Åø„Åæ„Åô</li>
                <li>üè® ÂÆøÂ†¥Áî∫„Åß„ÅØ‰ºëÊÜ©„ÇÑË≤∑„ÅÑÁâ©„Åå„Åß„Åç„Åæ„Åô</li>
                <li>üí∞ „ÅäÈáë„ÇíÁÆ°ÁêÜ„Åó„Å™„Åå„Çâ‰∫¨ÈÉΩ„ÇíÁõÆÊåá„Åó„Åæ„Åô</li>
                <li>üé™ ÁâπÂà•„Å™ÂÆøÂ†¥„Åß„ÅØ„Ç§„Éô„É≥„Éà„ÅåÁô∫Áîü„Åó„Åæ„Åô</li>
                <li>‚õ©Ô∏è ÂÖ®55Âú∞ÁÇπÔºàÊ±üÊà∏„ÉªÂÆøÂ†¥53„Éª‰∫¨ÈÉΩÔºâÂà∂Ë¶á„ÅßÂãùÂà©ÔºÅ</li>
                <li>üìö ÂÆüÈöõ„ÅÆÊ≠¥Âè≤„Å®Âú∞ÁêÜ„ÇíÂ≠¶„Åπ„ÇãÊïôËÇ≤„Ç≤„Éº„É†„Åß„Åô</li>
            </ul>
        </div>
    </div>

    <!-- „Ç§„Éô„É≥„Éà„Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó -->
    <div class="event-popup" id="event-popup">
        <h3 id="event-title">„Ç§„Éô„É≥„Éà</h3>
        <p id="event-description">Ë™¨Êòé</p>
        <button class="btn btn-primary" onclick="closeEvent()">Á∂ö„Åë„Çã</button>
    </div>

    <script>
        // Êù±Êµ∑ÈÅì‰∫îÂçÅ‰∏âÊ¨°„Éá„Éº„ÇøÔºàÊ±üÊà∏„Åã„Çâ‰∫¨ÈÉΩ„Åæ„Åß55Âú∞ÁÇπÔºâ
        const TOKAIDO_STATIONS = [
            { name: "Ê±üÊà∏„ÉªÊó•Êú¨Ê©ã", description: "ÊóÖ„ÅÆÂá∫Áô∫ÁÇπ", special: true },
            { name: "ÂìÅÂ∑ùÂÆø", description: "Ê±üÊà∏ÂõõÂÆø„ÅÆ‰∏Ä„Å§", special: false },
            { name: "Â∑ùÂ¥éÂÆø", description: "Â§öÊë©Â∑ù„ÅÆÊ∏°„ÅóÂ†¥", special: false },
            { name: "Á•ûÂ•àÂ∑ùÂÆø", description: "Ê®™ÊµúÊ∏Ø„Å´Ëøë„ÅÑÂÆøÂ†¥", special: true },
            { name: "‰øùÂúü„É∂Ë∞∑ÂÆø", description: "ÂùÇÈÅì„ÅÆÂ§ö„ÅÑÂÆøÂ†¥", special: false },
            { name: "Êà∏Â°öÂÆø", description: "ÁÆ±Ê†πË∑Ø„Å∏„ÅÆÂàÜÂ≤êÁÇπ", special: false },
            { name: "Ëó§Ê≤¢ÂÆø", description: "ÈÅäË°åÂØ∫„ÅßÊúâÂêç", special: true },
            { name: "Âπ≥Â°öÂÆø", description: "‰∏ÉÂ§ï„Åæ„Å§„Çä„ÅÆË°ó", special: false },
            { name: "Â§ßÁ£ØÂÆø", description: "Êµ∑Ê≤ø„ÅÑ„ÅÆÁæé„Åó„ÅÑÂÆøÂ†¥", special: false },
            { name: "Â∞èÁî∞ÂéüÂÆø", description: "Â∞èÁî∞ÂéüÂüé„ÅÆÂüé‰∏ãÁî∫", special: true },
            { name: "ÁÆ±Ê†πÂÆø", description: "Èô∫„Åó„ÅÑÂ±±ÈÅì„ÅÆÂÆøÂ†¥", special: true },
            { name: "‰∏âÂ≥∂ÂÆø", description: "‰ºäË±ÜÂõΩ„ÅÆÁéÑÈñ¢Âè£", special: false },
            { name: "Ê≤ºÊ¥•ÂÆø", description: "ÈßøÊ≤≥Êπæ„Å´Èù¢„Åó„ÅüÂÆøÂ†¥", special: false },
            { name: "ÂéüÂÆø", description: "ÂØåÂ£´Â±±„Åå„Çà„ÅèË¶ã„Åà„Çã", special: false },
            { name: "ÂêâÂéüÂÆø", description: "ÂØåÂ£´Â±±„ÅÆÁµ∂ÊôØ„Çπ„Éù„ÉÉ„Éà", special: true },
            { name: "Ëí≤ÂéüÂÆø", description: "Èõ™ÊôØËâ≤„ÅßÊúâÂêç", special: false },
            { name: "Áî±ÊØîÂÆø", description: "Ëñ©ÂüµÂ≥†„ÅÆÈõ£ÊâÄ", special: false },
            { name: "ËààÊ¥•ÂÆø", description: "Ê∏ÖË¶ãÂØ∫„ÅßÊúâÂêç", special: false },
            { name: "Ê±üÂ∞ªÂÆø", description: "Ê∏ÖÊ∞¥Ê∏Ø„Å´Ëøë„ÅÑ", special: false },
            { name: "Â∫ú‰∏≠ÂÆø", description: "ÈßøÂ∫úÂüé„ÅÆÂüé‰∏ãÁî∫", special: true },
            { name: "Èû†Â≠êÂÆø", description: "„Å®„Çç„ÇçÊ±Å„ÅßÊúâÂêç", special: false },
            { name: "Â≤°ÈÉ®ÂÆø", description: "ÂÆáÊ¥•„ÉéË∞∑Â≥†Ë∂ä„Åà", special: false },
            { name: "Ëó§ÊûùÂÆø", description: "Áî∞‰∏≠Âüé„Å´Ëøë„ÅÑ", special: false },
            { name: "Â≥∂Áî∞ÂÆø", description: "Â§ß‰∫ïÂ∑ù„ÅÆÂ∑ùË∂ä„Åó", special: true },
            { name: "ÈáëË∞∑ÂÆø", description: "Áâß„ÉéÂéüÂè∞Âú∞„ÅÆÂÖ•Âè£", special: false },
            { name: "Êó•ÂùÇÂÆø", description: "Â∞èÂ§ú„ÅÆ‰∏≠Â±±Ë∂ä„Åà", special: false },
            { name: "ÊéõÂ∑ùÂÆø", description: "ÊéõÂ∑ùÂüé„ÅÆÂüé‰∏ãÁî∫", special: true },
            { name: "Ë¢ã‰∫ïÂÆø", description: "Êù±Êµ∑ÈÅì„ÅÆÁúü„Çì‰∏≠", special: true },
            { name: "Ë¶ã‰ªòÂÆø", description: "Â§©Á´úÂ∑ù„Å´Ëøë„ÅÑ", special: false },
            { name: "ÊµúÊùæÂÆø", description: "ÊµúÊùæÂüé„ÅÆÂüé‰∏ãÁî∫", special: true },
            { name: "ËàûÂùÇÂÆø", description: "ÊµúÂêçÊπñÁïî„ÅÆÂÆøÂ†¥", special: false },
            { name: "Êñ∞Â±ÖÂÆø", description: "Êñ∞Â±ÖÈñ¢ÊâÄ„ÅßÊúâÂêç", special: true },
            { name: "ÁôΩÈ†àË≥ÄÂÆø", description: "ÊΩÆË¶ãÂùÇ„ÅÆÁµ∂ÊôØ", special: false },
            { name: "‰∫åÂ∑ùÂÆø", description: "Êú¨Èô£„ÅåÁèæÂ≠ò", special: false },
            { name: "ÂêâÁî∞ÂÆø", description: "ÂêâÁî∞Âüé„ÅÆÂüé‰∏ãÁî∫", special: false },
            { name: "Âæ°Ê≤πÂÆø", description: "Êùæ‰∏¶Êú®„ÅåÁæé„Åó„ÅÑ", special: false },
            { name: "Ëµ§ÂùÇÂÆø", description: "Êùâ‰∏¶Êú®„ÅÆÂÆøÂ†¥", special: false },
            { name: "Ëó§Â∑ùÂÆø", description: "„ÇÄ„Çâ„Åï„ÅçÈ∫¶„ÅßÊúâÂêç", special: false },
            { name: "Â≤°Â¥éÂÆø", description: "Âæ≥Â∑ùÂÆ∂Â∫∑ÁîüË™ï„ÅÆÂú∞", special: true },
            { name: "Ê±†ÈØâÈÆíÂÆø", description: "È¶¨Â∏Ç„ÅßË≥ë„Çè„ÅÜ", special: false },
            { name: "È≥¥Êµ∑ÂÆø", description: "ÊúâÊùæÁµû„Çä„ÅßÊúâÂêç", special: false },
            { name: "ÂÆÆÂÆø", description: "ÁÜ±Áî∞Á•ûÂÆÆ„ÅÆÈñÄÂâçÁî∫", special: true },
            { name: "Ê°ëÂêçÂÆø", description: "‰∏ÉÈáå„ÅÆÊ∏°„Åó", special: true },
            { name: "ÂõõÊó•Â∏ÇÂÆø", description: "Ê∏ØÁî∫„Å®„Åó„Å¶Ê†Ñ„Åà„Çã", special: false },
            { name: "Áü≥Ëñ¨Â∏´ÂÆø", description: "Ëñ¨Â∏´Â¶ÇÊù•„ÅßÊúâÂêç", special: false },
            { name: "Â∫ÑÈáéÂÆø", description: "ÁôΩÈõ®„ÅÆÂêçÊâÄ", special: false },
            { name: "‰∫ÄÂ±±ÂÆø", description: "‰∫ÄÂ±±Âüé„ÅÆÂüé‰∏ãÁî∫", special: false },
            { name: "Èñ¢ÂÆø", description: "Êù±Êµ∑ÈÅì„ÅÆÈñ¢ÊâÄ", special: true },
            { name: "ÂùÇ‰∏ãÂÆø", description: "Èà¥ÈπøÂ≥†„ÅÆÈ∫ì", special: false },
            { name: "ÂúüÂ±±ÂÆø", description: "Èà¥ÈπøÂ≥†Ë∂ä„Åà„ÅÆÂÆøÂ†¥", special: true },
            { name: "Ê∞¥Âè£ÂÆø", description: "Ê∞¥Âè£Âüé„ÅÆÂüé‰∏ãÁî∫", special: false },
            { name: "Áü≥ÈÉ®ÂÆø", description: "Áî∞Ê•Ω„ÅßÊúâÂêç", special: false },
            { name: "ËçâÊ¥•ÂÆø", description: "‰∏≠Â±±ÈÅì„Å®„ÅÆÂêàÊµÅÁÇπ", special: true },
            { name: "Â§ßÊ¥•ÂÆø", description: "ÁêµÁê∂ÊπñÁïî„ÅÆÂÆøÂ†¥", special: true },
            { name: "‰∫¨ÈÉΩ„Éª‰∏âÊù°Â§ßÊ©ã", description: "ÊóÖ„ÅÆÁµÇÁùÄÁÇπ", special: true }
        ];

        // „Ç≤„Éº„É†Áä∂ÊÖã
        let gameState = {
            currentPosition: 0,
            money: 1000,
            days: 0,
            inventory: ['ÈÅì‰∏≠ÊâãÂΩ¢', 'ËçâÈûã'],
            visitedStations: [0],
            isRolling: false
        };

        // „Ç§„Éô„É≥„Éà„Éá„Éº„Çø
        const EVENTS = {
            positive: [
                { title: "ÂïÜ‰∫∫„Å®„ÅÆÂá∫‰ºö„ÅÑ", description: "Ë¶™Âàá„Å™ÂïÜ‰∫∫„Åã„Çâ100‰∏°„ÇÇ„Çâ„ÅÑ„Åæ„Åó„ÅüÔºÅ", effect: { money: 100 } },
                { title: "ËâØ„ÅÑÂ§©Ê∞ó", description: "Âø´Êô¥„ÅßË∂≥Âèñ„Çä„ÇÇËªΩ„ÇÑ„ÅãÔºÅ1Êó•Âæó„Åó„Åæ„Åó„Åü", effect: { days: -1 } },
                { title: "ÂêçÁâ©ÊñôÁêÜ", description: "ÁæéÂë≥„Åó„ÅÑÂêçÁâ©ÊñôÁêÜ„ÅßÂÖÉÊ∞óÂõûÂæ©ÔºÅ", effect: { money: -50, item: "ÂêçÁâ©ÊñôÁêÜ" } },
                { title: "ÊóÖ‰ª≤Èñì", description: "È†º„ÇÇ„Åó„ÅÑÊóÖ‰ª≤Èñì„Åå„Åß„Åç„Åæ„Åó„ÅüÔºÅ", effect: { item: "ÊóÖ‰ª≤Èñì" } }
            ],
            negative: [
                { title: "ÁõóË≥ä", description: "ÁõóË≥ä„Å´ÈÅ≠„ÅÑ„ÄÅ200‰∏°Âèñ„Çâ„Çå„Åæ„Åó„Åü...", effect: { money: -200 } },
                { title: "ÊÇ™Â§©ÂÄô", description: "Â§ßÈõ®„ÅßË∂≥Ê≠¢„ÇÅ„ÄÅ2Êó•ÈÅÖ„Çå„Åæ„Åó„Åü", effect: { days: 2 } },
                { title: "ÁóÖÊ∞ó", description: "È¢®ÈÇ™„Çí„Å≤„ÅÑ„Å¶Ëñ¨‰ª£150‰∏°", effect: { money: -150 } },
                { title: "ÈÅì„Å´Ëø∑„ÅÜ", description: "ÈÅì„Å´Ëø∑„Å£„Å¶1Êó•‰ΩôË®à„Å´„Åã„Åã„Çä„Åæ„Åó„Åü", effect: { days: 1 } }
            ]
        };

        // „Ç≤„Éº„É†ÂàùÊúüÂåñ
        function initGame() {
            gameState = {
                currentPosition: 0,
                money: 1000,
                days: 0,
                inventory: ['ÈÅì‰∏≠ÊâãÂΩ¢', 'ËçâÈûã'],
                visitedStations: [0],
                isRolling: false
            };
            
            renderStations();
            updateGameInfo();
        }

        // ÂÆøÂ†¥Áî∫Ë°®Á§∫
        function renderStations() {
            const grid = document.getElementById('stations-grid');
            grid.innerHTML = '';
            
            TOKAIDO_STATIONS.forEach((station, index) => {
                const stationDiv = document.createElement('div');
                stationDiv.className = 'station';
                
                if (index === gameState.currentPosition) {
                    stationDiv.classList.add('current');
                    stationDiv.innerHTML = `<div class="player-token">üö∂</div>`;
                } else if (gameState.visitedStations.includes(index)) {
                    stationDiv.classList.add('visited');
                }
                
                if (station.special) {
                    stationDiv.classList.add('special');
                }
                
                stationDiv.innerHTML += `
                    <div class="station-number">${index + 1}</div>
                    <div class="station-name">${station.name}</div>
                `;
                
                stationDiv.onclick = () => showStationDetail(index);
                grid.appendChild(stationDiv);
            });
        }

        // „Çµ„Ç§„Ç≥„É≠„ÇíÊåØ„Çã
        function rollDice() {
            if (gameState.isRolling) return;
            
            gameState.isRolling = true;
            const dice = document.getElementById('dice');
            const rollBtn = document.getElementById('roll-btn');
            
            dice.classList.add('rolling');
            rollBtn.disabled = true;
            rollBtn.textContent = 'ÊåØ„Å£„Å¶„ÅÑ„Åæ„Åô...';
            
            // „Çµ„Ç§„Ç≥„É≠„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
            let animationCount = 0;
            const animationInterval = setInterval(() => {
                dice.textContent = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'][Math.floor(Math.random() * 6)];
                animationCount++;
                
                if (animationCount > 10) {
                    clearInterval(animationInterval);
                    
                    const result = Math.floor(Math.random() * 6) + 1;
                    dice.textContent = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'][result - 1];
                    
                    setTimeout(() => {
                        movePlayer(result);
                        dice.classList.remove('rolling');
                        rollBtn.disabled = false;
                        rollBtn.textContent = 'üé≤ „Çµ„Ç§„Ç≥„É≠„ÇíÊåØ„Çã';
                        gameState.isRolling = false;
                    }, 500);
                }
            }, 100);
        }

        // „Éó„É¨„Ç§„É§„ÉºÁßªÂãï
        function movePlayer(steps) {
            const newPosition = Math.min(gameState.currentPosition + steps, TOKAIDO_STATIONS.length - 1);
            
            gameState.currentPosition = newPosition;
            gameState.days += Math.ceil(steps / 2);
            gameState.visitedStations.push(newPosition);
            
            // ÁßªÂãï„Ç≥„Çπ„Éà
            gameState.money -= steps * 10;
            
            renderStations();
            updateGameInfo();
            
            // ÁâπÂà•„Å™ÂÆøÂ†¥„Åß„ÅÆ„Ç§„Éô„É≥„Éà
            const currentStation = TOKAIDO_STATIONS[newPosition];
            if (currentStation.special && Math.random() < 0.7) {
                setTimeout(() => {
                    triggerEvent();
                }, 1000);
            }
            
            // ÂãùÂà©Âà§ÂÆö
            if (newPosition === TOKAIDO_STATIONS.length - 1) {
                setTimeout(() => {
                    showVictory();
                }, 1500);
            }
        }

        // „Ç§„Éô„É≥„ÉàÁô∫Áîü
        function triggerEvent() {
            const isPositive = Math.random() < 0.6;
            const events = isPositive ? EVENTS.positive : EVENTS.negative;
            const event = events[Math.floor(Math.random() * events.length)];
            
            // „Ç§„Éô„É≥„ÉàÂäπÊûúÈÅ©Áî®
            if (event.effect.money) {
                gameState.money += event.effect.money;
            }
            if (event.effect.days) {
                gameState.days += event.effect.days;
            }
            if (event.effect.item) {
                gameState.inventory.push(event.effect.item);
            }
            
            showEventPopup(event.title, event.description);
            updateGameInfo();
        }

        // „Ç§„Éô„É≥„Éà„Éù„ÉÉ„Éó„Ç¢„ÉÉ„ÉóË°®Á§∫
        function showEventPopup(title, description) {
            document.getElementById('event-title').textContent = title;
            document.getElementById('event-description').textContent = description;
            document.getElementById('event-popup').style.display = 'block';
        }

        // „Ç§„Éô„É≥„Éà„Éù„ÉÉ„Éó„Ç¢„ÉÉ„ÉóÈñâ„Åò„Çã
        function closeEvent() {
            document.getElementById('event-popup').style.display = 'none';
        }

        // „Ç≤„Éº„É†ÊÉÖÂ†±Êõ¥Êñ∞
        function updateGameInfo() {
            const currentStation = TOKAIDO_STATIONS[gameState.currentPosition];
            document.getElementById('current-station').textContent = currentStation.name;
            document.getElementById('station-count').textContent = gameState.currentPosition + 1;
            document.getElementById('money').textContent = `${gameState.money}‰∏°`;
            document.getElementById('days').textContent = `${gameState.days}Êó•`;
            
            // ÈÄ≤Ë°åÂ∫¶„Éê„ÉºÊõ¥Êñ∞
            const progress = (gameState.currentPosition / (TOKAIDO_STATIONS.length - 1)) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
        }

        // ÂÆøÂ†¥Ë©≥Á¥∞Ë°®Á§∫
        function showStationDetail(index) {
            const station = TOKAIDO_STATIONS[index];
            alert(`${station.name}\n\n${station.description}\n${station.special ? '\nüé™ ÁâπÂà•„Å™ÂÆøÂ†¥„Åß„Åô' : ''}`);
        }

        // ÂÆøÂ†¥ÊÉÖÂ†±Ë°®Á§∫
        function showStationInfo() {
            const currentStation = TOKAIDO_STATIONS[gameState.currentPosition];
            let info = `üìç ÁèæÂú®Âú∞: ${currentStation.name}\n\n`;
            info += `üìù Ë™¨Êòé: ${currentStation.description}\n\n`;
            info += `üè® ÂÆøÂ†¥„Çø„Ç§„Éó: ${currentStation.special ? 'ÁâπÂà•„Å™ÂÆøÂ†¥' : '‰∏ÄËà¨„ÅÆÂÆøÂ†¥'}\n\n`;
            info += `üìä ÈÄ≤Ë°åÂ∫¶: ${gameState.currentPosition + 1}/${TOKAIDO_STATIONS.length} (${Math.round((gameState.currentPosition / (TOKAIDO_STATIONS.length - 1)) * 100)}%)`;
            alert(info);
        }

        // ÊåÅ„Å°Áâ©Ë°®Á§∫
        function showInventory() {
            let inventory = 'üéí ÊåÅ„Å°Áâ©:\n\n';
            gameState.inventory.forEach(item => {
                inventory += `‚Ä¢ ${item}\n`;
            });
            inventory += `\nüí∞ ÊâÄÊåÅÈáë: ${gameState.money}‰∏°`;
            alert(inventory);
        }

        // ÈÄ≤Ë°åÁä∂Ê≥ÅË°®Á§∫
        function showProgress() {
            let progress = 'üìä ÊóÖ„ÅÆË®òÈå≤:\n\n';
            progress += `üö∂ ÁèæÂú®Âú∞: ${TOKAIDO_STATIONS[gameState.currentPosition].name}\n`;
            progress += `üìç Ë®™ÂïèÊ∏à„ÅøÂÆøÂ†¥Êï∞: ${gameState.visitedStations.length}/${TOKAIDO_STATIONS.length}\n`;
            progress += `üìÖ ÊóÖË°åÊó•Êï∞: ${gameState.days}Êó•\n`;
            progress += `üí∞ ÊâÄÊåÅÈáë: ${gameState.money}‰∏°\n`;
            progress += `üéí ÊåÅ„Å°Áâ©: ${gameState.inventory.length}ÂÄã\n\n`;
            progress += `üèÅ ÊÆã„ÇäË∑ùÈõ¢: ${TOKAIDO_STATIONS.length - 1 - gameState.currentPosition}ÂÆøÂ†¥`;
            alert(progress);
        }

        // ÂãùÂà©Ë°®Á§∫
        function showVictory() {
            let message = 'üéâ Êù±Êµ∑ÈÅì‰∫îÂçÅ‰∏âÊ¨°Âà∂Ë¶á„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅ üéâ\n\n';
            message += `üìÖ ÊóÖË°åÊúüÈñì: ${gameState.days}Êó•\n`;
            message += `üí∞ ÊÆã„ÇäÊâÄÊåÅÈáë: ${gameState.money}‰∏°\n`;
            message += `üéí ÂèéÈõÜ„Ç¢„Ç§„ÉÜ„É†: ${gameState.inventory.length}ÂÄã\n\n`;
            
            let rank = '';
            if (gameState.days <= 30 && gameState.money >= 500) {
                rank = 'üèÜ ÊóÖ„ÅÆÈÅî‰∫∫';
            } else if (gameState.days <= 45 && gameState.money >= 200) {
                rank = 'ü•â ÁÜüÁ∑¥ÊóÖ‰∫∫';
            } else if (gameState.days <= 60) {
                rank = 'ü•à ÊôÆÈÄö„ÅÆÊóÖ‰∫∫';
            } else {
                rank = 'ü•á „ÅÆ„Çì„Å≥„ÇäÊóÖ‰∫∫';
            }
            
            message += `Ë©ï‰æ°: ${rank}`;
            alert(message);
        }

        // „Ç≤„Éº„É†„É™„Çª„ÉÉ„Éà
        function resetGame() {
            if (confirm('Êñ∞„Åó„ÅÑÊóÖ„ÇíÂßã„ÇÅ„Åæ„Åô„ÅãÔºü')) {
                initGame();
            }
        }

        // „Ç≤„Éº„É†ÈñãÂßã
        initGame();
    </script>
</body>
</html>