<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±æµ·é“äº”åä¸‰æ¬¡ã™ã”ã‚ãã‚²ãƒ¼ãƒ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }

        .game-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            color: #333;
        }

        .game-title {
            text-align: center;
            font-size: 2.8em;
            color: #8B0000;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .game-subtitle {
            text-align: center;
            font-size: 1.3em;
            color: #8B4513;
            margin-bottom: 30px;
            font-style: italic;
        }

        .game-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .info-card {
            background: linear-gradient(45deg, #fff8dc, #f0e68c);
            border: 2px solid #DAA520;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .info-card.active {
            border-color: #FF4500;
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(255, 69, 0, 0.4);
        }

        .info-card h3 {
            color: #8B4513;
            font-size: 1.4em;
            margin-bottom: 12px;
            border-bottom: 2px solid #DAA520;
            padding-bottom: 8px;
            font-weight: bold;
        }

        .info-card .player-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            text-align: center;
        }

        .info-card .stat-item {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            padding: 8px;
            border: 1px solid #DAA520;
        }

        .info-card .stat-label {
            font-size: 0.85em;
            color: #8B4513;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .info-card .stat-value {
            font-size: 1.1em;
            color: #8B0000;
            font-weight: bold;
        }

        .inventory-display {
            min-height: 20px;
            line-height: 1.2;
            word-wrap: break-word;
            font-size: 0.9em;
            overflow-wrap: anywhere;
        }

        .inventory-display span {
            white-space: nowrap;
            margin-right: 2px;
        }

        .stamina-display {
            font-weight: bold;
        }

        .stamina-low {
            color: #ff4444;
        }

        .stamina-medium {
            color: #ff8800;
        }

        .stamina-high {
            color: #44aa44;
        }

        .event-purchase {
            text-align: center;
            padding: 20px;
        }

        .required-item-info {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .game-board {
            background: linear-gradient(45deg, #f5f5dc, #fffacd);
            border: 3px solid #8B4513;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            position: relative;
        }

        .stations-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .station {
            background: #fff;
            border: 2px solid #ddd;
            border-radius: 12px;
            padding: 8px 4px;
            text-align: center;
            font-size: 0.85em;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .station:hover {
            background: #fffacd;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .station:active {
            transform: translateY(0px) scale(0.98);
        }

        .station.has-info {
            border-left: 4px solid #FFD700;
        }

        .station.has-info:hover {
            border-left-color: #FFA500;
        }

        .station.current {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border-color: #FF8C00;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            transform: scale(1.1);
        }

        .station.visited {
            background: linear-gradient(45deg, #90EE90, #98FB98);
            border-color: #228B22;
        }

        .station.event-station::after {
            content: 'ğŸª';
            position: absolute;
            top: 2px;
            left: 2px;
            font-size: 1.2em;
        }
        
        .station.market-station::before {
            content: 'ğŸ’°';
            position: absolute;
            bottom: 2px;
            left: 2px;
            font-size: 1.2em;
        }

        .station-number {
            font-size: 0.7em;
            color: #666;
            margin-bottom: 2px;
        }

        .station-name {
            font-weight: bold;
            color: #333;
            font-size: 0.9em;
        }

        .lodging-cost {
            font-size: 0.7em;
            text-align: center;
            color: #8B4513;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 3px;
            padding: 1px 3px;
            margin: 0 2px 3px 2px;
        }

        .player-token {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #FF4500;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .dice-area {
            text-align: center;
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(45deg, #f0f8ff, #e6f3ff);
            border-radius: 15px;
            border: 2px solid #4169E1;
        }

        .dice {
            font-size: 4em;
            margin: 15px;
            padding: 20px;
            background: white;
            border: 3px solid #333;
            border-radius: 15px;
            display: inline-block;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            user-select: none;
        }

        .dice:hover:not(.rolling) {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            border-color: #8B4513;
        }

        .dice:active:not(.rolling) {
            transform: scale(1.05);
        }

        .dice.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .dice.rolling {
            animation: roll 1s ease-in-out;
            pointer-events: none;
        }

        @keyframes roll {
            0% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.2); }
            50% { transform: rotate(180deg) scale(1.1); }
            75% { transform: rotate(270deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .btn:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn-primary {
            background: linear-gradient(45deg, #8B4513, #A0522D);
            color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(45deg, #654321, #8B4513);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #DAA520, #FFD700);
            color: #8B4513;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-secondary:hover:not(:disabled) {
            background: linear-gradient(45deg, #B8860B, #DAA520);
            transform: translateY(-2px);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999;
            display: none;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            border: 4px solid #8B4513;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .modal-content h3 {
            color: #8B0000;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .modal-content p {
            color: #333;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .station-image {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 2px solid #DAA520;
        }

        .image-caption {
            font-size: 0.85em;
            color: #666;
            text-align: center;
            margin: 5px 0 15px 0;
            font-style: italic;
        }
        
        #modal-choices {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        
        .shop-item, .inventory-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .item-info {
            text-align: left;
        }


        .progress-bar {
            background: #ddd;
            border-radius: 10px;
            padding: 3px;
            margin: 20px 0;
        }

        .progress-fill {
            background: linear-gradient(45deg, #4CAF50, #8BC34A);
            height: 20px;
            border-radius: 8px;
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.9em;
            font-weight: bold;
        }

        .rules-section {
            background: linear-gradient(45deg, #f9f5dc, #fff8dc);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            border-left: 5px solid #8B4513;
        }

        .rules-section h3 {
            color: #8B4513;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .rules-section ul {
            margin-left: 20px;
            color: #654321;
        }

        .rules-section li {
            margin-bottom: 8px;
            line-height: 1.4;
        }

        #setup-screen {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            color: #333;
        }

        #setup-screen h2 {
            color: #8B0000;
            margin-bottom: 20px;
        }

        .setup-control {
            margin-bottom: 15px;
        }

        .setup-control label {
            margin-right: 10px;
        }

        .setup-control input, .setup-control select {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        

        #turn-indicator {
            font-size: 1.5em;
            color: #8B4513;
            margin-top: 10px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .game-title {
                font-size: 2.2em;
            }
            
            .game-info {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .info-card .player-stats {
                grid-template-columns: 1fr 1fr;
                gap: 6px;
            }
            
            .info-card .stat-item {
                padding: 6px;
            }
            
            .info-card .stat-label {
                font-size: 0.8em;
            }
            
            .info-card .stat-value {
                font-size: 1em;
            }
            
            .stations-grid {
                grid-template-columns: repeat(6, 1fr);
                gap: 6px;
            }
            
            .station {
                font-size: 0.75em;
                min-height: 50px;
                padding: 6px 2px;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .station-image {
                max-width: 100%;
                margin: 10px 0;
            }
            
            .image-caption {
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <!--
    AI Model: Gemini
    User Prompt: tokaido-53-gameã‚’ã‚‚ã£ã¨é¢ç™½ãã—ã¦ãã ã•ã„ (A&C), æˆ»ã£ã¦ã—ã¾ã†ã‚¤ãƒ™ãƒ³ãƒˆã‚‚åŠ ãˆã¦ãã ã•ã„, å®¿å ´ã®ç‰¹å¾´ã‚’æ´»ã‹ã—ãŸè¨­å®šã«ã—ã¦ãã ã•ã„
    AI Approach: æ—¢å­˜ã®ã™ã”ã‚ãã‚²ãƒ¼ãƒ ã«ã€æ¡ˆAã€Œã‚¢ã‚¤ãƒ†ãƒ å±‹ã¨ã€ä½¿ã†ã€ã‚¢ã‚¤ãƒ†ãƒ ã®å°å…¥ã€ã¨æ¡ˆCã€Œå®¿å ´ã”ã¨ã®ãƒ¦ãƒ‹ãƒ¼ã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã€ã‚’å®Ÿè£…ã€‚ã•ã‚‰ã«ã€å®¿å ´ã®ç‰¹å¾´ã«åˆã‚ã›ãŸã€Œå¾Œé€€ã‚¤ãƒ™ãƒ³ãƒˆã€ã‚’è¿½åŠ ã€‚
    JavaScriptã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å¤§å¹…ã«å¤‰æ›´ã—ã€ã‚¤ãƒ™ãƒ³ãƒˆã¨ã‚¢ã‚¤ãƒ†ãƒ ã®ç®¡ç†ã‚’å¼·åŒ–ã€‚ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®é¸æŠè‚¢ã¨ã€äºˆæœŸã›ã¬å¾Œé€€ã®ãƒªã‚¹ã‚¯ã‚’åŠ ãˆã¦æˆ¦ç•¥æ€§ã‚’é«˜ã‚ã‚‹ã€‚
    Implementation Intent: ã‚²ãƒ¼ãƒ ã®å˜èª¿ã•ã‚’ãªãã—ã€ãƒªãƒ—ãƒ¬ã‚¤æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ã€‚ãŠé‡‘ã®ä½¿ã„é“ã€ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨ã€ã‚¤ãƒ™ãƒ³ãƒˆé¸æŠã®é‡è¦æ€§ã‚’é«˜ã‚ã€ã‚ˆã‚Šã‚¹ãƒªãƒªãƒ³ã‚°ãªã‚²ãƒ¼ãƒ ä½“é¨“ã‚’æä¾›ã™ã‚‹ã€‚
    -->

    <div id="setup-screen">
        <h2>ã‚²ãƒ¼ãƒ è¨­å®š</h2>
        <div class="setup-control">
            <label for="player-count">ãƒ—ãƒ¬ã‚¤äººæ•°:</label>
            <select id="player-count" onchange="updatePlayerInputs()">
                <option value="2">2äºº</option>
                <option value="3">3äºº</option>
                <option value="4">4äºº</option>
            </select>
        </div>
        <div id="player-inputs"></div>
        <button class="btn btn-primary" onclick="startGame()">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
    </div>

    <div class="game-container" id="game-container" style="display: none;">
        <h1 class="game-title">ğŸ® æ±æµ·é“äº”åä¸‰æ¬¡ã™ã”ã‚ã ğŸ®</h1>
        <p class="game-subtitle">æ±Ÿæˆ¸ã‹ã‚‰äº¬éƒ½ã¾ã§53ã®å®¿å ´ç”ºã‚’å·¡ã‚‹å¤§å†’é™ºï¼</p>

        <div class="game-info" id="game-info">
            <!-- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±ã‚«ãƒ¼ãƒ‰ãŒå‹•çš„ç”Ÿæˆã•ã‚Œã‚‹ -->
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress" style="width: 2%;">
                æ—…è·¯é€²è¡Œåº¦
            </div>
        </div>

        <div class="game-board">
            <div class="stations-grid" id="stations-grid">
                <!-- å®¿å ´ç”ºã¯JavaScriptã§å‹•çš„ç”Ÿæˆ -->
            </div>
        </div>

        <div class="dice-area">
            <div class="dice" id="dice" onclick="rollDice()" title="ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹">ğŸ²</div>
            <div style="margin-top: 15px; font-size: 1.2em; color: #8B4513; font-weight: bold;">
                ã‚µã‚¤ã‚³ãƒ­ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æŒ¯ã‚ã†ï¼
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-secondary" id="shop-btn" onclick="showShop()" style="display: none;">ğŸ’° ã‚¢ã‚¤ãƒ†ãƒ å±‹</button>
            <button class="btn btn-primary" onclick="resetGame()">ğŸ”„ æ–°ã—ã„æ—…</button>
        </div>

        <div id="turn-indicator">ã‚²ãƒ¼ãƒ é–‹å§‹å‰</div>

        <div class="rules-section">
            <h3>ğŸ¯ ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«</h3>
            <ul>
                <li>ğŸ² ã‚µã‚¤ã‚³ãƒ­ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ±æµ·é“ã‚’é€²ã¿ã¾ã™</li>
                <li>ğŸ® å®¿å ´ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨è©³ã—ã„æƒ…å ±ãŒè¦‹ã‚‰ã‚Œã¾ã™</li>
                <li>ğŸ¨ å®¿å ´ç”ºã§ã¯ã‚¢ã‚¤ãƒ†ãƒ ã®å£²è²·ãŒã§ãã¾ã™</li>
                <li>ğŸ’° ãŠé‡‘ã‚’ç®¡ç†ã—ãªãŒã‚‰äº¬éƒ½ã‚’ç›®æŒ‡ã—ã¾ã™</li>
                <li>ğŸª ç‰¹å®šã®å®¿å ´ã§ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ã¾ã™</li>
                <li>â›©ï¸ å…¨55åœ°ç‚¹åˆ¶è¦‡ã§å‹åˆ©ï¼</li>
            </ul>
        </div>
    </div>

    <!-- æ±ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <h3 id="modal-title">ã‚¿ã‚¤ãƒˆãƒ«</h3>
            <p id="modal-description">èª¬æ˜</p>
            <div id="modal-list"></div>
            <div id="modal-choices"></div>
        </div>
    </div>

        <script>
        // --- DATA --- //
        const TOKAIDO_STATIONS = [ 
            { name: "æ±Ÿæˆ¸ãƒ»æ—¥æœ¬æ©‹", lodging: 0 }, // å‡ºç™ºåœ°ç‚¹ãªã®ã§ç„¡æ–™
            { name: "å“å·å®¿", lodging: 40 }, // æœ‰åãªæœ€åˆã®å®¿å ´
            { name: "å·å´å®¿", event: 'kawasaki_ferry', lodging: 30 }, 
            { name: "ç¥å¥ˆå·å®¿", market: true, lodging: 35 }, 
            { name: "ä¿åœŸãƒ¶è°·å®¿", event: 'hodogaya_slope', lodging: 25 }, 
            { name: "æˆ¸å¡šå®¿", lodging: 20 }, 
            { name: "è—¤æ²¢å®¿", market: true, lodging: 35 }, 
            { name: "å¹³å¡šå®¿", lodging: 20 }, 
            { name: "å¤§ç£¯å®¿", lodging: 25 }, 
            { name: "å°ç”°åŸå®¿", market: true, lodging: 45 }, // åŸä¸‹ç”ºã§å¤§ããªå®¿å ´
            { name: "ç®±æ ¹å®¿", market: true, event: 'hakone', lodging: 50 }, // å±±é–“ã®é«˜ç´šæ¸©æ³‰å®¿
            { name: "ä¸‰å³¶å®¿", lodging: 35 }, 
            { name: "æ²¼æ´¥å®¿", lodging: 30 }, 
            { name: "åŸå®¿", lodging: 20 }, 
            { name: "å‰åŸå®¿", market: true, lodging: 30 }, 
            { name: "è’²åŸå®¿", lodging: 20 }, 
            { name: "ç”±æ¯”å®¿", lodging: 25 }, 
            { name: "èˆˆæ´¥å®¿", lodging: 20 }, 
            { name: "æ±Ÿå°»å®¿", lodging: 30 }, 
            { name: "åºœä¸­å®¿", market: true, lodging: 40 }, // é§¿æ²³å›½åºœã®é‡è¦å®¿å ´
            { name: "é å­å®¿", event: 'food', lodging: 25 }, 
            { name: "å²¡éƒ¨å®¿", lodging: 20 }, 
            { name: "è—¤æå®¿", lodging: 25 }, 
            { name: "å³¶ç”°å®¿", event: 'ooi_river', lodging: 35 }, // å¤§äº•å·è¶Šãˆã®é‡è¦å®¿å ´
            { name: "é‡‘è°·å®¿", lodging: 25 }, 
            { name: "æ—¥å‚å®¿", event: 'nissaka_pass', lodging: 30 }, 
            { name: "æ›å·å®¿", market: true, lodging: 40 }, // åŸä¸‹ç”º
            { name: "è¢‹äº•å®¿", lodging: 30 }, // æ±æµ·é“ã®ä¸­é–“ç‚¹
            { name: "è¦‹ä»˜å®¿", lodging: 25 }, 
            { name: "æµœæ¾å®¿", market: true, lodging: 45 }, // å¤§ããªåŸä¸‹ç”º
            { name: "èˆå‚å®¿", lodging: 25 }, 
            { name: "æ–°å±…å®¿", event: 'sekisho', lodging: 35 }, // é–¢æ‰€ã®é‡è¦å®¿å ´
            { name: "ç™½é ˆè³€å®¿", lodging: 20 }, 
            { name: "äºŒå·å®¿", lodging: 20 }, 
            { name: "å‰ç”°å®¿", lodging: 25 }, 
            { name: "å¾¡æ²¹å®¿", lodging: 30 }, 
            { name: "èµ¤å‚å®¿", lodging: 25 }, 
            { name: "è—¤å·å®¿", lodging: 20 }, 
            { name: "å²¡å´å®¿", market: true, event: 'ieyasu', lodging: 50 }, // å¾³å·å®¶åº·ç”Ÿèª•åœ°ã®é‡è¦å®¿å ´
            { name: "æ± é¯‰é®’å®¿", lodging: 25 }, 
            { name: "é³´æµ·å®¿", event: 'narumi_shibori', lodging: 30 }, 
            { name: "å®®å®¿", lodging: 40 }, // æµ·ä¸Šäº¤é€šã®è¦åœ°
            { name: "æ¡‘åå®¿", market: true, lodging: 45 }, // ä¼Šå‹¢å›½ã®é‡è¦å®¿å ´
            { name: "å››æ—¥å¸‚å®¿", lodging: 35 }, 
            { name: "çŸ³è–¬å¸«å®¿", lodging: 20 }, 
            { name: "åº„é‡å®¿", lodging: 20 }, 
            { name: "äº€å±±å®¿", lodging: 25 }, 
            { name: "é–¢å®¿", event: 'sekisho', lodging: 35 }, // é–¢æ‰€ã®é‡è¦å®¿å ´
            { name: "å‚ä¸‹å®¿", lodging: 20 }, 
            { name: "åœŸå±±å®¿", lodging: 25 }, 
            { name: "æ°´å£å®¿", lodging: 30 }, 
            { name: "çŸ³éƒ¨å®¿", event: 'food', lodging: 25 }, 
            { name: "è‰æ´¥å®¿", market: true, event: 'kusatsu_junction', lodging: 45 }, // ä¸­å±±é“åˆæµã®é‡è¦å®¿å ´
            { name: "å¤§æ´¥å®¿", lodging: 40 }, // äº¬éƒ½ç›´å‰ã®é‡è¦å®¿å ´
            { name: "äº¬éƒ½ãƒ»ä¸‰æ¡å¤§æ©‹", event: 'goal', lodging: 0 } // ã‚´ãƒ¼ãƒ«ãªã®ã§ç„¡æ–™
        ];
        const ITEMS = { 'dango': { name: 'åç‰©ã®å›£å­', cost: 50, description: 'æ¬¡ã®ã‚µã‚¤ã‚³ãƒ­ã®ç›®ã‚’+1ã™ã‚‹ã€‚', emoji: 'ğŸ¡' }, 'waraji': { name: 'ä¸ˆå¤«ãªè‰é‹', cost: 100, description: '3ã‚¿ãƒ¼ãƒ³ã®é–“ã€ç§»å‹•ã‚³ã‚¹ãƒˆ(ä¸¡)ãŒåŠé¡ã«ãªã‚‹ã€‚', emoji: 'ğŸ‘¡' }, 'omamori': { name: 'ãŠå®ˆã‚Š', cost: 200, description: 'æ‚ªã„ã‚¤ãƒ™ãƒ³ãƒˆã®çµæœã‚’1å›ã ã‘å›é¿ã§ãã‚‹ã€‚', emoji: 'ğŸ§¿' }, 'map': { name: 'å¤åœ°å›³', cost: 300, description: 'æ¬¡ã®ç§»å‹•ã§1ï½3ã®å¥½ããªæ•°ã ã‘é€²ã‚ã‚‹ã€‚', emoji: 'ğŸ—ºï¸' }, 'shibori': { name: 'æœ‰æ¾çµã‚Š', cost: 0, description: 'é³´æµ·å®¿ã®ç¾ã—ã„ç‰¹ç”£å“ã€‚æ—…ã®è©•ä¾¡ã«å½±éŸ¿ã™ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚', emoji: 'ğŸ€' } };
        const STATION_INFO = {
            0: { title: "æ±Ÿæˆ¸ãƒ»æ—¥æœ¬æ©‹", description: "æ±æµ·é“äº”åä¸‰æ¬¡ã®èµ·ç‚¹ã¨ãªã‚‹æ—¥æœ¬æ©‹ã€‚å¾³å·å¹•åºœãŒè¨­ã‘ãŸäº”è¡—é“ã®èµ·ç‚¹ã§ã€ã“ã“ã‹ã‚‰äº¬éƒ½ã¾ã§ç´„500ã‚­ãƒ­ã®é•·ã„æ—…ãŒå§‹ã¾ã‚Šã¾ã™ã€‚é­šæ²³å²¸ã§æœ‰åãªé­šå¸‚å ´ãŒã‚ã‚Šã€æ±Ÿæˆ¸ã®å°æ‰€ã¨ã—ã¦æ „ãˆãŸå•†æ¥­ã®ä¸­å¿ƒåœ°ã§ã—ãŸã€‚æ©‹ã®ä¸Šã‹ã‚‰ã¯å¯Œå£«å±±ã‚‚æœ›ã‚ãŸã¨ã„ã„ã¾ã™ã€‚å¤§åè¡Œåˆ—ãŒæ—©æœã«å‡ºç™ºã™ã‚‹æ§˜å­ãŒæã‹ã‚Œã¦ã„ã¾ã™ã€‚", emoji: "ğŸŒ‰", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/55152/131312/main-image" },
            1: { title: "å“å·å®¿", description: "æ±Ÿæˆ¸ã‹ã‚‰æœ€åˆã®æ­£å¼ãªå®¿å ´ç”ºã€‚æµ·ã«é¢ã—ãŸé¢¨å…‰æ˜åªšãªå ´æ‰€ã§ã€å¤šãã®æ—…äººãŒæœ€åˆã®ä¼‘æ¯ã‚’å–ã‚Šã¾ã—ãŸã€‚æ±Ÿæˆ¸æ¹¾ã®æ½®é¢¨ã‚’æ„Ÿã˜ãªãŒã‚‰ã€ã“ã‚Œã‹ã‚‰å§‹ã¾ã‚‹é•·ã„æ—…è·¯ã¸ã®æ±ºæ„ã‚’æ–°ãŸã«ã™ã‚‹å ´æ‰€ã§ã—ãŸã€‚éŠéƒ­ã‚‚ã‚ã‚Šå¤œã¯è³‘ã‚„ã‹ã§ã—ãŸã€‚å¤œæ˜ã‘ã®ç¾ã—ã„å…‰æ™¯ã§æœ‰åã§ã™ã€‚", emoji: "ğŸ–ï¸", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/37196/131347/main-image" },
            2: { title: "å·å´å®¿", description: "å¤šæ‘©å·ã®æ¸¡ã—å ´ãŒã‚ã‚‹å®¿å ´ã€‚å·è¶ŠãˆãŒæ—…ã®æœ€åˆã®é›£æ‰€ã§ã€å¢—æ°´æ™‚ã«ã¯è¶³æ­¢ã‚ã‚’é£Ÿã†ã“ã¨ã‚‚ã€‚æ¸¡ã—èˆ¹ã®æ–™é‡‘äº¤æ¸‰ã¯æ—…äººã®è…•ã®è¦‹ã›æ‰€ã§ã—ãŸã€‚å·å´å¤§å¸«ã¸ã®å‚è©£å®¢ã‚‚å¤šãç«‹ã¡å¯„ã‚Šã¾ã—ãŸã€‚", emoji: "ğŸŒŠ", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122826.jpg" },
            3: { title: "ç¥å¥ˆå·å®¿", description: "æ¨ªæµœæ¸¯ã«è¿‘ãã€å¹•æœ«ã«ã¯å¤–å›½äººå±…ç•™åœ°ã¨ã—ã¦æ „ãˆã¾ã—ãŸã€‚é«˜å°ã«ã‚ã‚‹å®¿å ´ã‹ã‚‰ã¯æ±Ÿæˆ¸æ¹¾ãŒä¸€æœ›ã§ãã€é ãæˆ¿ç·åŠå³¶ã¾ã§è¦‹æ¸¡ã›ã¾ã—ãŸã€‚é–‹å›½å¾Œã¯å›½éš›è‰²è±Šã‹ãªç”ºã¨ã—ã¦ç™ºå±•ã—ã¾ã—ãŸã€‚æ±Ÿæˆ¸æ¹¾ã®æ°´ãŒå®¿å ´ã®èŒ¶å±‹ã‚„æ—…ç± ã®åŸºç¤ã¾ã§è¿«ã‚‹é¢¨å…‰æ˜åªšãªå ´æ‰€ã§ã—ãŸã€‚", emoji: "â›µ", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122827.jpg" },
            4: { title: "ä¿åœŸãƒ¶è°·å®¿", description: "æ¨©å¤ªå‚ã®æ€¥å‚ã§æœ‰åã€‚æ­Œå·åºƒé‡ã®æµ®ä¸–çµµã€Œæ±æµ·é“äº”æ‹¾ä¸‰æ¬¡ã€ã«ã‚‚æã‹ã‚ŒãŸæ™¯å‹åœ°ã§ã™ã€‚å‚é“ã¯é™ºã—ãã€è·ç‰©ã‚’èƒŒè² ã£ãŸæ—…äººã«ã¯è©¦ç·´ã®å ´ã§ã—ãŸã€‚å‚ã®ä¸Šã‹ã‚‰ã®çœºã‚ã¯çµ¶æ™¯ã§ã€ç–²ã‚Œã‚’ç™’ã—ã¦ãã‚Œã¾ã—ãŸã€‚", emoji: "â›°ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122828.jpg" },
            5: { title: "æˆ¸å¡šå®¿", description: "æ±æµ·é“æœ‰æ•°ã®å¤§ããªå®¿å ´ç”ºã¨ã—ã¦æ „ãˆã€å¤šãã®å•†äººã‚„å¤§åè¡Œåˆ—ã§è³‘ã‚ã„ã¾ã—ãŸã€‚å®¿å±‹ã®æ•°ã‚‚å¤šãã€æ—…äººã«ã¨ã£ã¦é‡è¦ãªä¼‘æ¯åœ°ã§ã—ãŸã€‚æŸå°¾å·æ²¿ã„ã®ç¾ã—ã„æ™¯è‰²ã‚‚æ¥½ã—ã‚ã¾ã—ãŸã€‚", emoji: "ğŸ˜ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122776.jpg" },
            6: { title: "è—¤æ²¢å®¿", description: "æ±Ÿå³¶ç¥ç¤¾ã¸ã®å‚è©£é“ãŒåˆ†å²ã™ã‚‹åœ°ç‚¹ã€‚å¤šãã®å‚æ‹å®¢ã§è³‘ã‚ã„ã€å®¿å ´ã¨ã—ã¦ã‚‚é‡è¦ãªå½¹å‰²ã‚’æœãŸã—ã¾ã—ãŸã€‚æ±Ÿã®å³¶ã¸ã®é“æ¨™ãŒã‚ã‚Šã€æ—…äººã¯ç¾ã—ã„æµ·ã‚’æƒ³åƒã—ãªãŒã‚‰æ­©ãã¾ã—ãŸã€‚", emoji: "â›©ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122777.jpg" },
            7: { title: "å¹³å¡šå®¿", description: "ç›¸æ¨¡å¹³é‡ã®ä¸­å¤®ã«ä½ç½®ã™ã‚‹å®¿å ´ã€‚åºƒã€…ã¨ã—ãŸå¹³åœ°ã§ã€æ—…äººã«ã¨ã£ã¦æ­©ãã‚„ã™ã„åŒºé–“ã§ã—ãŸã€‚å®¿å ´ã®è¦æ¨¡ã¯ä¸­ç¨‹åº¦ã§ã—ãŸãŒã€å¿ƒåœ°ã‚ˆã„ä¼‘æ¯ã‚’æä¾›ã—ã¦ãã‚Œã¾ã—ãŸã€‚", emoji: "ğŸŒ¾", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122779.jpg" },
            8: { title: "å¤§ç£¯å®¿", description: "ç›¸æ¨¡æ¹¾ã«é¢ã—ãŸç¾ã—ã„å®¿å ´ã€‚æµ·å²¸ã®æ™¯è‰²ãŒç´ æ™´ã‚‰ã—ãã€å¤šãã®æ–‡äººå¢¨å®¢ãŒæ„›ã—ãŸå ´æ‰€ã§ã™ã€‚æ–°é®®ãªæµ·ã®å¹¸ã‚‚æ¥½ã—ã‚ã€æ—…ã®ç–²ã‚Œã‚’ç™’ã‚„ã—ã¦ãã‚Œã¾ã—ãŸã€‚", emoji: "ğŸŒŠ", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122780.jpg" },
            9: { title: "å°ç”°åŸå®¿", description: "å°ç”°åŸåŸã®åŸä¸‹ç”ºã¨ã—ã¦æ „ãˆãŸé‡è¦ãªå®¿å ´ã€‚é–¢æ±ã¨é–¢è¥¿ã‚’çµã¶è¦è¡ã§ã€å¤šãã®æ­¦å£«ã‚„å•†äººãŒè¡Œãäº¤ã„ã¾ã—ãŸã€‚ç®±æ ¹è¶Šãˆã‚’å‰ã«ã—ãŸæœ€å¾Œã®å¤§ããªå®¿å ´ã§ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚", emoji: "ğŸ¯", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122833.jpg" },
            10: { title: "ç®±æ ¹å®¿", description: "ã€Œå¤©ä¸‹ã®é™ºã€ã¨ã—ã¦æã‚Œã‚‰ã‚ŒãŸç®±æ ¹å³ ã®éº“ã«ã‚ã‚‹å±±é–“ã®å®¿å ´ã€‚æ¨™é«˜ãŒé«˜ãå¤ã§ã‚‚æ¶¼ã—ã„é¿æš‘åœ°ã§ã—ãŸã€‚æ¸©æ³‰ãŒã‚ã‚Šã€é™ºã—ã„å³ è¶Šãˆã§ç–²ã‚ŒãŸæ—…äººã®èº«ä½“ã‚’ç™’ã‚„ã—ã¾ã—ãŸã€‚é–¢æ‰€ã‚‚ã‚ã‚Šã€å³ã—ã„å–ã‚Šç· ã¾ã‚ŠãŒè¡Œã‚ã‚Œã¦ã„ã¾ã—ãŸã€‚", emoji: "â™¨ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122782.jpg" },
            11: { title: "ä¸‰å³¶å®¿", description: "ç®±æ ¹ã‚’è¶ŠãˆãŸå¾Œã®æœ€åˆã®å®¿å ´ã€‚ä¸‰å¶‹å¤§ç¤¾ã®é–€å‰ç”ºã¨ã—ã¦æ „ãˆã€å¤šãã®å‚æ‹å®¢ã§è³‘ã‚ã„ã¾ã—ãŸã€‚å¯Œå£«å±±ã®æ¹§ãæ°´ãŒè±Šå¯Œã§ã€ç¾å‘³ã—ã„æ°´ã¨è•éº¦ã§æœ‰åã§ã—ãŸã€‚", emoji: "â›©ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122783.jpg" },
            12: { title: "æ²¼æ´¥å®¿", description: "é§¿æ²³æ¹¾ã«é¢ã—ãŸæ¸¯ç”ºã®å®¿å ´ã€‚æ–°é®®ãªæµ·ç”£ç‰©ãŒè±Šå¯Œã§ã€ç‰¹ã«é­šã®ç¾å‘³ã—ã•ã¯æ—…äººã®é–“ã§ã‚‚è©•åˆ¤ã§ã—ãŸã€‚å¯Œå£«å±±ã®çœºã‚ã‚‚ç´ æ™´ã‚‰ã—ã„å ´æ‰€ã§ã—ãŸã€‚", emoji: "ğŸŸ", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122893.jpg" },
            13: { title: "åŸå®¿", description: "å¯Œå£«å±±ã‚’èƒŒæ™¯ã«ã—ãŸç¾ã—ã„æœã®é¢¨æ™¯ã§æœ‰åãªå®¿å ´ã€‚åºƒé‡ã®æµ®ä¸–çµµã€ŒåŸ æœä¹‹å¯Œå£«ã€ã§çŸ¥ã‚‰ã‚Œã€é™å¯‚ãªæœã®å¯Œå£«å±±ã‚’æœ›ã‚€çµ¶æ™¯ã®åœ°ã§ã—ãŸã€‚æ—…äººã¯æ—©æœã®å¯Œå£«ã®ç¾ã—ã•ã«æ„Ÿå‹•ã—ã€å¤šãã®æ­Œäººã‚‚è©©æ­Œã‚’è© ã¿ã¾ã—ãŸã€‚", emoji: "ğŸŒ„", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122187.jpg" },
            14: { title: "å‰åŸå®¿", description: "å¯Œå£«å±±ã®éº“ã«ä½ç½®ã™ã‚‹å®¿å ´ã€‚é›„å¤§ãªå¯Œå£«å±±ã‚’é–“è¿‘ã«æœ›ã‚ã‚‹çµ¶å¥½ã®å ´æ‰€ã§ã€å¤šãã®æ—…äººãŒæ„Ÿå‹•ã—ã¾ã—ãŸã€‚å·¦å¯Œå£«ã¨ã—ã¦æœ‰åãªå¯Œå£«å±±ã®çœºã‚ãŒæ¥½ã—ã‚ã¾ã—ãŸã€‚æ±æµ·é“ã§å”¯ä¸€ã€é€²è¡Œæ–¹å‘ã®å·¦å´ã«å¯Œå£«å±±ãŒè¦‹ãˆã‚‹åæ‰€ã§ã™ã€‚", emoji: "ğŸ—»", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122188.jpg" },
            15: { title: "è’²åŸå®¿", description: "é§¿æ²³æ¹¾ã«é¢ã—ãŸå®¿å ´ç”ºã€‚é›ªã®è’²åŸã¨ã—ã¦æ­Œå·åºƒé‡ã®åä½œã§æœ‰åã§ã™ã€‚å®Ÿéš›ã«ã¯ã‚ã¾ã‚Šé›ªã¯é™ã‚‰ãªã„åœ°åŸŸã§ã—ãŸãŒã€åºƒé‡ã®æƒ³åƒåŠ›ãŒç”Ÿã¿å‡ºã—ãŸç¾ã—ã„é›ªæ™¯è‰²ã¯å¤šãã®äººã€…ã‚’é­…äº†ã—ã¾ã—ãŸã€‚", emoji: "â„ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122787.jpg" },
            16: { title: "ç”±æ¯”å®¿", description: "é§¿æ²³æ¹¾ã«é¢ã—ãŸå°ã•ãªå®¿å ´ã€‚è–©åŸµå³ ã‹ã‚‰ã®å¯Œå£«å±±ã¨é§¿æ²³æ¹¾ã®çœºã‚ã¯æ±æµ·é“éšä¸€ã®çµ¶æ™¯ã¨ã•ã‚Œã€æ­Œå·åºƒé‡ã®æµ®ä¸–çµµã§ã‚‚æœ‰åã§ã™ã€‚æ¡œãˆã³ã®ç”£åœ°ã§ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚", emoji: "ğŸŒ¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122849.jpg" },
            17: { title: "èˆˆæ´¥å®¿", description: "æ¸…è¦‹å¯ºã§æœ‰åãªå®¿å ´ã€‚å¾³å·å®¶åº·ãŒå¹¼å°‘æœŸã‚’éã”ã—ãŸä»Šå·æ°ã‚†ã‹ã‚Šã®åœ°ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚é§¿æ²³æ¹¾ã‚’æœ›ã‚€é¢¨å…‰æ˜åªšãªå ´æ‰€ã§ã€å¤šãã®æ—…äººãŒç¾ã—ã„æ™¯è‰²ã‚’æ¥½ã—ã¿ã¾ã—ãŸã€‚", emoji: "ğŸŒŠ", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122790.jpg" },
            18: { title: "æ±Ÿå°»å®¿", description: "ç¾åœ¨ã®é™å²¡å¸‚æ¸…æ°´åŒºã«ã‚ãŸã‚‹æ¸¯ç”ºã®å®¿å ´ã€‚é§¿æ²³æ¹¾ã«é¢ã—ã€å¯Œå£«å±±ã®çµ¶æ™¯ã¨ä¸‰ä¿ã®æ¾åŸã§æœ‰åã§ã—ãŸã€‚æµ·ç”£ç‰©ã‚‚è±Šå¯Œã§ã€æ—…äººã«äººæ°—ã®ä¼‘æ¯åœ°ã§ã—ãŸã€‚", emoji: "ğŸ”ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122791.jpg" },
            19: { title: "åºœä¸­å®¿", description: "é§¿æ²³å›½ã®å›½åºœãŒç½®ã‹ã‚ŒãŸæ­´å²ã‚ã‚‹ç”ºã€‚ä¹…èƒ½å±±æ±ç…§å®®ã¸ã®å‚è©£é“ã‚‚é€šã‚Šã€å¾³å·å®¶åº·ã‚†ã‹ã‚Šã®åœ°ã¨ã—ã¦é‡è¦ã§ã—ãŸã€‚æ”¿æ²»ãƒ»çµŒæ¸ˆã®ä¸­å¿ƒåœ°ã¨ã—ã¦æ „ãˆã¾ã—ãŸã€‚", emoji: "ğŸ›ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122841.jpg" },
            20: { title: "é å­å®¿", description: "ã€Œé å­å®¿ã¨ã‚ã‚æ±ã€ã§å…¨å›½ã«çŸ¥ã‚‰ã‚ŒãŸåç‰©ã®å®¿å ´ã€‚è‡ªç„¶è–¯ã‚’ä½¿ã£ãŸã¨ã‚ã‚æ±ã¯çµ¶å“ã§ã€æ¾å°¾èŠ­è•‰ã‚‚ã€Œé§¿æ²³è·¯ã‚„èŠ±æ©˜ã‚‚èŒ¶ã®åŒ‚ã²ã€ã¨è© ã‚“ã ã»ã©ã€‚ä¸¸å­å·ã®æ¸…æµã‚‚ç¾ã—ã„å ´æ‰€ã§ã—ãŸã€‚", emoji: "ğŸ²", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122793.jpg" },
            21: { title: "å²¡éƒ¨å®¿", description: "å®‡æ´¥ãƒè°·å³ ã®éº“ã«ä½ç½®ã™ã‚‹å±±é–“ã®å®¿å ´ã€‚ã€Œå²¡éƒ¨å®¿ å®‡æ´¥ã®å±±è¾ºã®ã€ã¨å¤æ­Œã«ã‚‚è© ã¾ã‚Œã€é™ºã—ã„å³ è¶Šãˆã‚’æ§ãˆãŸæ—…äººã®é‡è¦ãªä¼‘æ¯åœ°ã§ã—ãŸã€‚å³ ã®èŒ¶å±‹ã§ã¯æ¸©ã‹ã„ã‚‚ã¦ãªã—ã‚’å—ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚", emoji: "â›°ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122843.jpg" },
            22: { title: "è—¤æå®¿", description: "å®‡æ´¥è°·å³ ã‚’æ§ãˆãŸå±±é–“éƒ¨ã¸ã®å…¥ã‚Šå£ã¨ãªã‚‹å®¿å ´ã€‚èŒ¶ã®ç”£åœ°ã¨ã—ã¦ã‚‚çŸ¥ã‚‰ã‚Œã€ç¾å‘³ã—ã„ãŠèŒ¶ã‚’å‘³ã‚ã†ã“ã¨ãŒã§ãã¾ã—ãŸã€‚å³ è¶Šãˆã‚’å‰ã«ã—ãŸæ—…äººã®é‡è¦ãªä¼‘æ¯åœ°ã§ã—ãŸã€‚", emoji: "ğŸµ", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122795.jpg" },
            23: { title: "å³¶ç”°å®¿", description: "å¤§äº•å·ã®å·è¶Šãˆã§æœ‰åãªå®¿å ´ã€‚ã€Œç®±æ ¹å…«é‡Œã¯é¦¬ã§ã‚‚è¶Šã™ãŒã€è¶Šã™ã«è¶Šã•ã‚Œã¬å¤§äº•å·ã€ã¨æ­Œã‚ã‚ŒãŸã»ã©ã€‚å·ãŒå¢—æ°´ã™ã‚‹ã¨ä½•æ—¥ã‚‚è¶³æ­¢ã‚ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã€ã€Œå³¶ç”°ã«å¸¯ã‚’ç· ã‚ã‹ã‹ã‚‹ã€ã¨ã„ã†å·è¶Šãˆå”„ã§çŸ¥ã‚‰ã‚Œã¾ã™ã€‚", emoji: "ğŸï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122759.jpg" },
            24: { title: "é‡‘è°·å®¿", description: "å¤§äº•å·ã‚’æ¸¡ã£ãŸå¾Œã®æœ€åˆã®å®¿å ´ã€‚å·è¶Šãˆã®å®‰å µæ„Ÿã‹ã‚‰å¤šãã®æ—…äººã§è³‘ã‚ã„ã¾ã—ãŸã€‚ç‰§ä¹‹åŸå°åœ°ã¸ã®å…¥ã‚Šå£ã§ã‚‚ã‚ã‚Šã€èŒ¶ç•‘ã®ç¾ã—ã„é¢¨æ™¯ãŒåºƒãŒã£ã¦ã„ã¾ã—ãŸã€‚", emoji: "ğŸµ", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122845.jpg" },
            25: { title: "æ—¥å‚å®¿", description: "å°å¤œã®ä¸­å±±å³ ã«ã‚ã‚‹å±±é–“ã®å®¿å ´ã€‚ã€Œå¤œæ³£ãçŸ³ã€ã®æ‚²ã—ã„ä¼èª¬ã§æœ‰åã§ã€æ—…äººã®æ¶™ã‚’èª˜ã„ã¾ã—ãŸã€‚é™ºã—ã„å³ é“ã§é“ã«è¿·ã†ã“ã¨ã‚‚ã‚ã‚Šã€å±±ç›—ã‚Šã®å‡ºæ²¡ã‚‚æã‚Œã‚‰ã‚Œã¦ã„ã¾ã—ãŸã€‚èŒ¶å±‹ã§ä¼‘ã‚€æ—…äººã®å¿ƒã‚’æ…°ã‚ã‚‹æ¸©ã‹ãªã‚‚ã¦ãªã—ãŒã‚ã‚Šã¾ã—ãŸã€‚", emoji: "ğŸ—¿", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/55993/131406/main-image" },
            26: { title: "æ›å·å®¿", description: "æ›å·åŸã®åŸä¸‹ç”ºã¨ã—ã¦æ „ãˆãŸå®¿å ´ã€‚ã€Œæ›å·ã®å¤œæ³£ãçŸ³ã€ã®ä¼èª¬ã§æœ‰åã§ã€å±±å†…ä¸€è±ŠãŒåŸä¸»ã‚’å‹™ã‚ãŸã“ã¨ã§ã‚‚çŸ¥ã‚‰ã‚Œã¾ã™ã€‚æ±æµ·é“ã®ä¸­ã§ã‚‚é‡è¦ãªå®¿å ´ã§ã—ãŸã€‚", emoji: "ğŸ¯", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122907.jpg" },
            27: { title: "è¢‹äº•å®¿", description: "æ±æµ·é“ã®çœŸã‚“ä¸­ã«ä½ç½®ã™ã‚‹å®¿å ´ã¨ã—ã¦ã€Œæ±æµ·é“ã®ã©çœŸã‚“ä¸­ã€ã¨å‘¼ã°ã‚Œã¾ã—ãŸã€‚å‡ºèŒ¶å±‹ï¼ˆã§ã¡ã‚ƒã‚„ï¼‰ã¨å‘¼ã°ã‚Œã‚‹èŒ¶å±‹ãŒæœ‰åã§ã€æ—…äººã¯ç¾å‘³ã—ã„èŒ¶ã¨å›£å­ã§ä¸€æ¯ã¤ãã¾ã—ãŸã€‚å¯ç¡æ–ã¸ã®å‚è©£é“ã§ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚", emoji: "ğŸµ", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122846.jpg" },
            28: { title: "è¦‹ä»˜å®¿", description: "å¤©ç«œå·ã®æ¸¡ã—ãŒã‚ã‚‹é‡è¦ãªå®¿å ´ã€‚é å·åœ°æ–¹ã®ä¸­å¿ƒçš„ãªå®¿å ´ã¨ã—ã¦æ „ãˆã€å¤šãã®æ—…äººã§è³‘ã‚ã„ã¾ã—ãŸã€‚å¤©ç«œå·ã®å·å¹…ã¯åºƒãã€æ¸¡ã—èˆ¹ã§ã®å·è¶Šãˆã¯æ—…ã®é›£æ‰€ã®ä¸€ã¤ã§ã—ãŸã€‚", emoji: "â›µ", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122768.jpg" },
            29: { title: "æµœæ¾å®¿", description: "æµœæ¾åŸã®åŸä¸‹ç”ºã€‚å¾³å·å®¶åº·ãŒé’å¹´æ™‚ä»£ã‚’éã”ã—ãŸã€Œå‡ºä¸–åŸã€ã¨ã—ã¦æœ‰åã§ã™ã€‚é å·ç˜ã«è¿‘ãã€æµ·ã®å¹¸ã‚‚è±Šå¯Œã§ã—ãŸã€‚ç¶¿ç¹”ç‰©ã®ç”£åœ°ã¨ã—ã¦ã‚‚æ „ãˆã¦ã„ã¾ã—ãŸã€‚", emoji: "ğŸ¯", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122875.jpg" },
            30: { title: "èˆå‚å®¿", description: "æµœåæ¹–ã«é¢ã—ãŸé¢¨å…‰æ˜åªšãªå®¿å ´ã€‚ã€Œèˆé˜ªã®ä¸€é‡Œå¡šã€ã§æœ‰åã§ã€æµœåæ¹–ã®ç¾ã—ã„æ™¯è‰²ã¨æ–°é®®ãªé­šä»‹é¡ã§æ—…äººã‚’ã‚‚ã¦ãªã—ã¾ã—ãŸã€‚ä»Šåˆ‡ã®æ¸¡ã—ã¨ã„ã†æµœåæ¹–ã‚’æ¸¡ã‚‹èˆ¹æ—…ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚", emoji: "ğŸŸ", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/55678/131268/main-image" },
            31: { title: "æ–°å±…å®¿", description: "æ–°å±…é–¢æ‰€ãŒã‚ã£ãŸé‡è¦ãªå®¿å ´ã€‚ç‰¹ã«å¥³æ€§ã®é€šè¡Œã«ã¯å³ã—ã„å–ã‚Šç· ã¾ã‚ŠãŒè¡Œã‚ã‚Œã€ã€Œå…¥ã‚Šé‰„ç ²ã«å‡ºå¥³ã€ã¨ã—ã¦æã‚Œã‚‰ã‚Œã¾ã—ãŸã€‚ä»Šåˆ‡æ¸¡ã—ã¨ã„ã†æµ·ä¸Šã®æ¸¡ã—ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚", emoji: "âš–ï¸", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/37019/131216/main-image" },
            32: { title: "ç™½é ˆè³€å®¿", description: "æ½®è¦‹å‚ã§æœ‰åãªæµ·æ²¿ã„ã®å®¿å ´ã€‚é å·ç˜ã‚’æœ›ã‚€ç¾ã—ã„æ™¯è‰²ã§æ—…äººã‚’è¿ãˆã¾ã—ãŸã€‚å‚ã®ä¸Šã‹ã‚‰ã¯åºƒå¤§ãªå¤ªå¹³æ´‹ãŒä¸€æœ›ã§ãã€å¤šãã®æ—…äººãŒãã®çµ¶æ™¯ã«æ„Ÿå‹•ã—ã¾ã—ãŸã€‚", emoji: "ğŸŒŠ", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/55680/131270/main-image" },
            33: { title: "äºŒå·å®¿", description: "æœ¬é™£ã¨è„‡æœ¬é™£ãŒã‚ˆãæ•´ã£ãŸå®¿å ´ã€‚å‰ç”°åŸä¸‹ã‚’æ§ãˆãŸé‡è¦ãªä¼‘æ¯åœ°ã§ã€å¤šãã®å¤§åè¡Œåˆ—ã‚‚å®¿æ³Šã—ã¾ã—ãŸã€‚è¡—é“æ²¿ã„ã«ã¯ç¾ã—ã„æ¾ä¸¦æœ¨ãŒç¶šã„ã¦ã„ã¾ã—ãŸã€‚", emoji: "ğŸŒ²", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/55681/131271/main-image" },
            34: { title: "å‰ç”°å®¿", description: "è±Šå·ã®ã»ã¨ã‚Šã«ã‚ã‚‹åŸä¸‹ç”ºã®å®¿å ´ã€‚å‰ç”°åŸã‚’ä¸­å¿ƒã¨ã—ãŸé‡è¦ãªæ‹ ç‚¹ã§ã€ä¸‰æ²³å›½ã®æ”¿æ²»ãƒ»çµŒæ¸ˆã®ä¸­å¿ƒåœ°ã§ã—ãŸã€‚åŸä¸‹ç”ºã‚‰ã—ã„è³‘ã‚ã„ã‚’è¦‹ã›ã¦ã„ã¾ã—ãŸã€‚", emoji: "ğŸ¯", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/55682/131272/main-image" },
            35: { title: "å¾¡æ²¹å®¿", description: "ã€Œå¾¡æ²¹ã‚„èµ¤å‚å‰ç”°ã§ã‚‚ã€æ± é¯‰é®’ã«æ³Šã¾ã‚‹ãªã€é§…ã§ã”ã–ã‚‹ã€ã¨è© ã‚ã‚ŒãŸå®¿å ´ã€‚æ¾ä¸¦æœ¨ãŒç¾ã—ãã€æ—…äººã®ç–²ã‚Œã‚’ç™’ã‚„ã—ã¾ã—ãŸã€‚é£¯ç››å¥³ã§è³‘ã‚ã£ãŸã“ã¨ã§ã‚‚çŸ¥ã‚‰ã‚Œã¾ã™ã€‚", emoji: "ğŸŒ²", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/55161/131343/main-image" },
            36: { title: "è—¤å·å®¿", description: "ã€Œã“ã“ã¯åã«ãŸã¤è—¤å·ã®å®¿ã‚ˆã€ã¨æ­Œã«è© ã¾ã‚ŒãŸè—¤ã®åæ‰€ã€‚æ˜¥ã«ã¯ç¾ã—ã„è—¤ã®èŠ±ãŒå’²ãä¹±ã‚Œã€å¤šãã®æ—…äººãŒè¶³ã‚’æ­¢ã‚ã¾ã—ãŸã€‚å±±é–“ã®é™ã‹ãªå®¿å ´ã§ã—ãŸã€‚", emoji: "ğŸ’œ", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/55162/131344/main-image" },
            37: { title: "èµ¤å‚å®¿", description: "ã€Œèµ¤å‚ã®å®¿ã§é£¯ç››å¥³éƒã«æƒšã‚Œã‚‰ã‚Œã¦ã€ã¨ã„ã†ä¿—è¬¡ã§çŸ¥ã‚‰ã‚ŒãŸå®¿å ´ã€‚æœ¬é™£ã‚„è„‡æœ¬é™£ãŒç«‹æ´¾ã§ã€å¤§åã®å®¿æ³Šã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã—ãŸã€‚æ‰ä¸¦æœ¨ã‚‚ç¾ã—ã„å ´æ‰€ã§ã—ãŸã€‚", emoji: "ğŸŒ²", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/36572/131322/main-image" },
            38: { title: "å²¡å´å®¿", description: "å¾³å·å®¶åº·ç”Ÿèª•ã®åœ°ã¨ã—ã¦æœ‰åãªå²¡å´åŸã®åŸä¸‹ç”ºã€‚æ±æµ·é“ã§ã‚‚æœ€é‡è¦ã®å®¿å ´ã®ä¸€ã¤ã§ã€æœ¬é™£ã‚‚æ ¼å¼é«˜ã„ã‚‚ã®ã§ã—ãŸã€‚å…«ä¸å‘³å™Œã®ç”£åœ°ã¨ã—ã¦ã‚‚çŸ¥ã‚‰ã‚Œã€ç‹¬ç‰¹ã®é¢¨å‘³ãŒæ—…äººã«æ„›ã•ã‚Œã¾ã—ãŸã€‚", emoji: "ğŸ¯", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122858.jpg" },
            39: { title: "æ± é¯‰é®’å®¿", description: "ã€Œå¾¡æ²¹ã‚„èµ¤å‚å‰ç”°ã§ã‚‚ã€æ± é¯‰é®’ã«æ³Šã¾ã‚‹ãªã€é§…ã§ã”ã–ã‚‹ã€ã¨è© ã‚ã‚ŒãŸå®¿å ´ã€‚é¦¬å¸‚ã§æœ‰åã§ã€å¤šãã®å•†äººãŒé¦¬ã®å£²è²·ã«è¨ªã‚Œã¾ã—ãŸã€‚çŸ¥ç«‹ç¥ç¤¾ã®é–€å‰ç”ºã§ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚", emoji: "ğŸ", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122859.jpg" },
            40: { title: "é³´æµ·å®¿", description: "æœ‰æ¾çµã‚Šã®ç”£åœ°ã¨ã—ã¦å…¨å›½ã«åã‚’é¦³ã›ãŸå®¿å ´ã€‚è—æŸ“ã‚ã®ç¾ã—ã„çµã‚ŠæŸ“ã‚ã¯æ±Ÿæˆ¸ã§ã‚‚å¤§äººæ°—ã§ã€å¤šãã®æ—…äººãŒãŠåœŸç”£ã¨ã—ã¦è²·ã„æ±‚ã‚ã¾ã—ãŸã€‚è·äººã®æŠ€è¡“ã¯èŠ¸è¡“çš„ã§ã—ãŸã€‚", emoji: "ğŸ¨", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122860.jpg" },
            41: { title: "å®®å®¿", description: "æ±æµ·é“æœ€å¤§ã®å®¿å ´ã¨ã—ã¦æ „ãˆãŸç†±ç”°ã®å®¿ã€‚ç†±ç”°ç¥å®®ã®é–€å‰ç”ºã§ã‚‚ã‚ã‚Šã€å‚æ‹å®¢ã§å¸¸ã«è³‘ã‚ã£ã¦ã„ã¾ã—ãŸã€‚ä¸ƒé‡Œã®æ¸¡ã—ã§æ¡‘åã¸ã¨å‘ã‹ã†é‡è¦ãªæ¸¯ã§ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚", emoji: "â›©ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122861.jpg" },
            42: { title: "æ¡‘åå®¿", description: "ä¸ƒé‡Œã®æ¸¡ã—ã®çµ‚ç‚¹ã§ã€ä¼Šå‹¢å›½ã¸ã®å…¥ã‚Šå£ã€‚æ¡‘ååŸã®åŸä¸‹ç”ºã¨ã—ã¦æ „ãˆã€ã€Œãã®æ‰‹ã¯æ¡‘åã®ç„¼ãè›¤ã€ã®è«ºã§æœ‰åã§ã™ã€‚ä¼Šå‹¢ç¥å®®ã¸ã®å‚è©£é“ã®åˆ†å²ç‚¹ã§ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚", emoji: "ğŸ¦ª", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122862.jpg" },
            43: { title: "å››æ—¥å¸‚å®¿", description: "å››ã¨ä¹ã®ä»˜ãæ—¥ã«å¸‚ãŒç«‹ã£ãŸã“ã¨ã‹ã‚‰åå‰ãŒä»˜ã„ãŸå•†æ¥­ã®ç”ºã€‚æ±æµ·é“ã§ã‚‚æœ‰æ•°ã®å•†æ¥­å®¿å ´ã§ã€æ§˜ã€…ãªç‰©è³‡ãŒé›†ã¾ã‚Šã¾ã—ãŸã€‚æ¸¯ç”ºã¨ã—ã¦ã‚‚æ „ãˆã¦ã„ã¾ã—ãŸã€‚", emoji: "ğŸª", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122863.jpg" },
            44: { title: "çŸ³è–¬å¸«å®¿", description: "çŸ³è–¬å¸«å¯ºã§æœ‰åãªå°ã•ãªå®¿å ´ã€‚è–¬å¸«å¦‚æ¥ã«ãŠå‚ã‚Šã™ã‚‹äººã€…ã§è³‘ã‚ã„ã€ç—…æ°—å¹³ç™’ã‚’ç¥ˆã‚‹æ—…äººãŒå¤šãç«‹ã¡å¯„ã‚Šã¾ã—ãŸã€‚é™ã‹ãªå±±é‡Œã®å®¿å ´ã§ã—ãŸã€‚", emoji: "ğŸ’Š", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122864.jpg" },
            45: { title: "åº„é‡å®¿", description: "åºƒé‡ã®æœ€ã‚‚æœ‰åãªä½œå“ã®ä¸€ã¤ã€Œåº„é‡ã®ç™½é›¨ã€ã§çŸ¥ã‚‰ã‚Œã‚‹å®¿å ´ã€‚çªç„¶ã®å¤•ç«‹ã«è¦‹èˆã‚ã‚ŒãŸæ—…äººãŸã¡ãŒé›¨å®¿ã‚Šã™ã‚‹æ§˜å­ãŒç”Ÿãç”Ÿãã¨æã‹ã‚Œã¦ã„ã¾ã™ã€‚å®Ÿéš›ã«é›¨ã®å¤šã„åœ°åŸŸã§ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚", emoji: "ğŸŒ§ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122216.jpg" },
            46: { title: "äº€å±±å®¿", description: "äº€å±±åŸã®åŸä¸‹ç”ºã¨ã—ã¦æ „ãˆãŸå®¿å ´ã€‚éˆ´é¹¿å³ è¶Šãˆã‚’æ§ãˆãŸé‡è¦ãªä¼‘æ¯åœ°ã§ã€å¤šãã®æ—…äººãŒè¶³ã‚’ä¼‘ã‚ã¾ã—ãŸã€‚å±±é–“éƒ¨ã¸ã®å…¥ã‚Šå£ã¨ã—ã¦ã€æ—…è·¯ã®æº–å‚™ã‚’æ•´ãˆã‚‹å ´æ‰€ã§ã—ãŸã€‚", emoji: "ğŸ¯", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122866.jpg" },
            47: { title: "é–¢å®¿", description: "éˆ´é¹¿å³ ã‚’æ§ãˆãŸé‡è¦ãªå®¿å ´ã€‚æ±æµ·é“ã¨å¤§å’Œè¡—é“ã®åˆ†å²ç‚¹ã§ã€é–¢æ‰€ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚å¤ä»£ã‹ã‚‰äº¤é€šã®è¦è¡ã¨ã—ã¦æ „ãˆã€å¤šãã®æ—…äººãŒè¡Œãäº¤ã„ã¾ã—ãŸã€‚", emoji: "ğŸ›¤ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122867.jpg" },
            48: { title: "å‚ä¸‹å®¿", description: "éˆ´é¹¿å³ ã®éº“ã«ã‚ã‚‹å±±é–“ã®å°ã•ãªå®¿å ´ã€‚å³ è¶Šãˆã‚’çµ‚ãˆãŸæ—…äººãŒã»ã£ã¨ä¸€æ¯ã¤ãå ´æ‰€ã§ã€é™ºã—ã„å±±é“ã‚’ä¸‹ã£ã¦ããŸå®‰å µæ„Ÿã‚’å‘³ã‚ãˆã¾ã—ãŸã€‚é™å¯‚ãªå±±é‡Œã®é¢¨æ™¯ãŒç¾ã—ã„å ´æ‰€ã§ã—ãŸã€‚", emoji: "â›°ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122868.jpg" },
            49: { title: "åœŸå±±å®¿", description: "ã€ŒåœŸå±±ã®æ˜¥é›¨ã€ã¨ã—ã¦åºƒé‡ãŒæã„ãŸç¾ã—ã„æ˜¥ã®æƒ…æ™¯ã§æœ‰åã€‚éˆ´é¹¿å±±è„ˆã®éº“ã«ä½ç½®ã—ã€å±±é–“ã®é™ã‹ãªå®¿å ´ã§ã—ãŸã€‚æ˜¥ã®è¨ªã‚Œã‚’æ„Ÿã˜ã•ã›ã‚‹ç©ã‚„ã‹ãªé›¨ã®é¢¨æ™¯ãŒå°è±¡çš„ã§ã™ã€‚", emoji: "ğŸŒ¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122230.jpg" },
            50: { title: "æ°´å£å®¿", description: "æ°´å£åŸã®åŸä¸‹ç”ºã¨ã—ã¦æ „ãˆãŸå®¿å ´ã€‚ç”²è³€å¿è€…ã®é‡Œã«è¿‘ãã€ç¥ç§˜çš„ãªé›°å›²æ°—ã‚’æŒã¤å ´æ‰€ã§ã—ãŸã€‚è¿‘æ±Ÿè·¯ã®é‡è¦ãªä¸­ç¶™ç‚¹ã¨ã—ã¦å¤šãã®æ—…äººãŒåˆ©ç”¨ã—ã¾ã—ãŸã€‚", emoji: "ğŸ¥·", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/36585/131335/main-image" },
            51: { title: "çŸ³éƒ¨å®¿", description: "ã€ŒçŸ³éƒ¨ã®å®¿ã§æ¢…è¦‹ã¦ã”ã–ã‚Œã€ã¨æ­Œã‚ã‚ŒãŸå®¿å ´ã€‚æ¢…ã®åæ‰€ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã€æ˜¥ã«ã¯å¤šãã®èŠ±è¦‹å®¢ã§è³‘ã‚ã„ã¾ã—ãŸã€‚è¿‘æ±Ÿè·¯ã®å…¥ã‚Šå£ã§ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚", emoji: "ğŸŒ¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122880.jpg" },
            52: { title: "è‰æ´¥å®¿", description: "æ±æµ·é“ã¨ä¸­å±±é“ã®åˆæµç‚¹ã¨ã—ã¦ã€æ±Ÿæˆ¸æ™‚ä»£ã§æœ€ã‚‚é‡è¦ãªå®¿å ´ã®ä¸€ã¤ã€‚ã€Œè‰æ´¥ã‚ˆã„ã¨ã“ä¸€åº¦ã¯ãŠã„ã§ã€ã¨æ­Œã‚ã‚Œã€å¤šãã®æ—…äººãŒè¡Œãäº¤ã†äº¤é€šã®å¤§å‹•è„ˆã§ã—ãŸã€‚æœ¬é™£ã‚‚æ ¼å¼ãŒé«˜ãã€å¤šãã®å¤§åãŒåˆ©ç”¨ã—ã¾ã—ãŸã€‚", emoji: "ğŸ›¤ï¸", image: "https://images.metmuseum.org/CRDImages/as/mobile-large/DP122871.jpg" },
            53: { title: "å¤§æ´¥å®¿", description: "çµç¶æ¹–ç•”ã«ã‚ã‚‹ç¾ã—ã„å®¿å ´ã€‚å¤§æ´¥çµµã§æœ‰åã§ã€å¤šãã®ç”»å¸«ãŒè…•ã‚’æŒ¯ã‚‹ã„ã¾ã—ãŸã€‚æ¯”å¡å±±å»¶æš¦å¯ºã¸ã®å‚è©£é“ã§ã‚‚ã‚ã‚Šã€å®—æ•™çš„ãªæ„å‘³ã§ã‚‚é‡è¦ãªå ´æ‰€ã§ã—ãŸã€‚", emoji: "ğŸ¨", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/37031/131228/main-image" },
            54: { title: "äº¬éƒ½ãƒ»ä¸‰æ¡å¤§æ©‹", description: "ã¤ã„ã«äº¬ã®éƒ½ã«åˆ°ç€ï¼æ±æµ·é“äº”åä¸‰æ¬¡ã®çµ‚ç‚¹ã€ä¸‰æ¡å¤§æ©‹ã§ã™ã€‚é•·ã„æ—…è·¯ã®çµ‚ã‚ã‚Šã«ã€å¤šãã®æ—…äººãŒæ„Ÿæ…¨æ·±ã„æ€ã„ã‚’æŠ±ãã¾ã—ãŸã€‚é´¨å·ã«ã‹ã‹ã‚‹ç¾ã—ã„æ©‹ã‹ã‚‰è¦‹ã‚‹äº¬ã®éƒ½ã®æ™¯è‰²ã¯æ ¼åˆ¥ã§ã—ãŸã€‚ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼", emoji: "ğŸŒ", image: "https://collectionapi.metmuseum.org/api/collection/v1/iiif/37249/131401/main-image" }
        };

        const EVENTS = { 'hodogaya_slope': { title: "æ¨©å¤ªå‚ã®æ‚²åŠ‡", description: "æ¨©å¤ªå‚ã®æ€¥ãªä¸‹ã‚Šå‚ã§è¶³ã‚’æ»‘ã‚‰ã›ã€è·ç‰©ã‚’è½ã¨ã—ã¦ã—ã¾ã£ãŸï¼ è·ç‰©ã‚’æ‹¾ã†ãŸã‚ã€1ã¤æ‰‹å‰ã®ç¥å¥ˆå·å®¿ã¾ã§æˆ»ã‚‹ç¾½ç›®ã«ãªã£ãŸã€‚", choices: [ { text: "ä»•æ–¹ãªã„ã€æˆ»ã‚ã† (-1ãƒã‚¹)", effect: { steps: -1 } } ] }, 'nissaka_pass': { title: "å°å¤œã®ä¸­å±±ã®è¿·ã„é“", description: "å°å¤œã®ä¸­å±±ã§ä¸æ°—å‘³ãªé›°å›²æ°—ã‚’æ„Ÿã˜ã€é“ã‚’é–“é•ãˆã¦ã—ã¾ã£ãŸï¼ æ°—ã¥ã‘ã°2ã¤æ‰‹å‰ã®é‡‘è°·å®¿ã¾ã§æˆ»ã£ã¦ãã¦ã—ã¾ã£ãŸã€‚", choices: [ { text: "é“ã‚’é–“é•ãˆãŸã‹â€¦ (-2ãƒã‚¹, +1æ—¥)", effect: { steps: -2, days: 1 } } ] }, 'kawasaki_ferry': { title: "å¤šæ‘©å·ã®æ¸¡ã—", description: "å¤šæ‘©å·ã‚’æ¸¡ã‚‹æ¸¡ã—èˆ¹ã ã€‚èˆ¹é ­ãŒæ–™é‡‘(50ä¸¡)ã‚’æç¤ºã—ã¦ã„ã‚‹ã€‚", choices: [ { text: "æ­£è¦æ–™é‡‘ã‚’æ‰•ã† (-50ä¸¡)", effect: { money: -50 }, cost: 50 }, { text: "å€¤åˆ‡ã‚Šäº¤æ¸‰ã™ã‚‹", type: 'haggle', success: { text: "äº¤æ¸‰æˆåŠŸï¼(-30ä¸¡)", effect: { money: -30 } }, failure: { text: "äº¤æ¸‰å¤±æ•—â€¦(+1æ—¥)", effect: { days: 1 } }, cost: 0 } ] }, 'narumi_shibori': { title: "æœ‰æ¾çµã‚Šã®èª˜æƒ‘", description: "ç¾ã—ã„æœ‰æ¾çµã‚Šã®åº—ãŒç›®ã«å…¥ã£ãŸã€‚è¦‹äº‹ãªå¸ƒã ãŒã€ã‹ãªã‚Šé«˜ä¾¡ã ã€‚", choices: [ { text: "è¨˜å¿µã«è³¼å…¥ã™ã‚‹ (-250ä¸¡)", effect: { item: 'shibori' }, cost: 250 }, { text: "é«˜ã™ãã‚‹ã®ã§è«¦ã‚ã‚‹", effect: {} } ] }, 'kusatsu_junction': { title: "ä¸­å±±é“ã¨ã®åˆæµç‚¹", description: "ä¸­å±±é“ã‹ã‚‰æ¥ãŸã¨ã„ã†æ—…äººã¨å‡ºä¼šã£ãŸã€‚ä½•ã‹æƒ…å ±ã‚’äº¤æ›ã—ãªã„ã‹ã€ã¨æŒã¡ã‹ã‘ã‚‰ã‚ŒãŸã€‚", choices: [ { text: "æƒ…å ±äº¤æ›ã™ã‚‹", type: 'gamble', success: { text: "è¿‘é“ç™ºè¦‹ï¼(-1æ—¥)", effect: { days: -1 } }, failure: { text: "ã»ã‚‰è©±ã ã£ãŸâ€¦(-50ä¸¡)", effect: { money: -50 } } }, { text: "é–¢ã‚ã‚‰ãšã«å…ˆã‚’æ€¥ã", effect: {} } ] }, 'hakone': { title: "å¤©ä¸‹ã®é™ºã€ç®±æ ¹å…«é‡Œ", description: "é™ºã—ã„å±±é“ãŒç›®ã®å‰ã«ï¼ã©ã†ã‚„ã£ã¦è¶Šãˆã¾ã™ã‹ï¼Ÿ", choices: [ { text: "è‡ªåŠ›ã§è¶Šãˆã‚‹ (+2æ—¥)", effect: { days: 2 } }, { text: "é§•ç± ã‚’é›‡ã† (-150ä¸¡)", effect: { money: -150 }, cost: 150 }, { text: "ä¸ˆå¤«ãªè‰é‹ã‚’ä½¿ã†", effect: { days: 1 }, requiredItem: 'waraji' } ] }, 'ooi_river': { title: "å¤§äº•å·ã®å·ç•™ã‚", description: "å·ãŒå¢—æ°´ã—ã¦æ¸¡ã‚Œã¾ã›ã‚“ï¼ã©ã†ã—ã¾ã™ã‹ï¼Ÿ", choices: [ { text: "æ•°æ—¥å¾…ã¤ (+3æ—¥)", effect: { days: 3 } }, { text: "å·è¶Šäººè¶³ã‚’é›‡ã† (-200ä¸¡)", effect: { money: -200 }, cost: 200 }, { text: "å¤åœ°å›³ã®è£é“ã‚’è¡Œã", effect: { days: 1, money: -50 }, requiredItem: 'map', cost: 50 } ] }, 'ieyasu': { title: "å¾³å·å®¶åº·ç”Ÿèª•ã®åœ°", description: "å²¡å´åŸä¸‹ã§å°†è»å®¶ã‚†ã‹ã‚Šã®å“ã‚’ç™ºè¦‹ï¼å¹¸é‹ãŒèˆã„è¾¼ã‚“ã ï¼", choices: [ { text: "ã‚ã‚ŠãŒãŸãé ‚æˆ´ã™ã‚‹ (+200ä¸¡)", effect: { money: 200 } } ] }, 'food': { title: "åç‰©æ–™ç†", description: "ç¾å‘³ã—ãã†ãªåç‰©æ–™ç†ãŒã‚ã‚Šã¾ã™ã€‚é£Ÿã¹ã¦ã„ãã¾ã™ã‹ï¼Ÿ", choices: [ { text: "é£Ÿã¹ã‚‹ (-50ä¸¡, +1æ—¥)", effect: { money: -50, days: 1 }, cost: 50 }, { text: "å…ˆã‚’æ€¥ã", effect: {} } ] }, 'sekisho': { title: "é–¢æ‰€ã§ã®æ¤œå•", description: "é–¢æ‰€ã§å½¹äººã«ã‚ˆã‚‹å³ã—ã„æ¤œå•ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚", choices: [ { text: "ç´ ç›´ã«é€šã‚‹ (-20ä¸¡, +1æ—¥)", effect: { money: -20, days: 1 }, cost: 20 }, { text: "è¢–ã®ä¸‹ã‚’ä½¿ã† (-100ä¸¡)", effect: { money: -100 }, cost: 100 } ] } };
        const PLAYER_COLORS = ['#FF4500', '#1E90FF', '#32CD32', '#FFD700'];

        // --- GAME STATE --- //
        let gameState;

        // --- SETUP FUNCTIONS --- //
        function updatePlayerInputs() {
            const count = document.getElementById('player-count').value;
            const inputsContainer = document.getElementById('player-inputs');
            inputsContainer.innerHTML = '';
            for (let i = 0; i < count; i++) {
                inputsContainer.innerHTML += `
                    <div class="setup-control">
                        <label>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ ${i + 1}:</label>
                        <input type="text" id="player-name-${i}" value="æ—…äºº ${i + 1}">
                    </div>
                `;
            }
        }

        function startGame() {
            const playerCount = document.getElementById('player-count').value;
            const players = [];
            for (let i = 0; i < playerCount; i++) {
                players.push({
                    name: document.getElementById(`player-name-${i}`).value,
                    position: 0,
                    money: 1000,
                    days: 0,
                    stamina: 100, // åˆæœŸä½“åŠ›100
                    inventory: [],
                    activeEffects: { warajiTurns: 0 },
                    color: PLAYER_COLORS[i],
                    hasFinished: false,
                    isResting: false // ä½“åŠ›ã‚¼ãƒ­æ™‚ã®ä¼‘ã¿çŠ¶æ…‹
                });
            }

            gameState = {
                players: players,
                currentPlayerIndex: 0,
                isGameBlocked: false,
                finishedPlayers: 0
            };

            document.getElementById('setup-screen').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';

            initGame();
        }

        // --- INITIALIZATION --- //

        function initGame() {
            renderStations();
            renderPlayerInfoCards();
            updateAllUI();
        }

        // --- RENDER FUNCTIONS --- //
        function renderStations() {
            const grid = document.getElementById('stations-grid');
            grid.innerHTML = '';
            TOKAIDO_STATIONS.forEach((station, index) => {
                const stationDiv = document.createElement('div');
                stationDiv.className = 'station';
                
                // è©³ç´°æƒ…å ±ãŒã‚ã‚‹å®¿å ´ã«ã¯ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¿½åŠ 
                if (STATION_INFO[index]) {
                    stationDiv.classList.add('has-info');
                    stationDiv.title = `ã‚¯ãƒªãƒƒã‚¯ã—ã¦${station.name}ã®è©³ç´°ã‚’è¦‹ã‚‹`;
                }
                
                // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
                stationDiv.addEventListener('click', () => {
                    showStationInfo(index);
                });
                
                const lodgingText = station.lodging > 0 ? `<div class="lodging-cost">${station.lodging}ä¸¡</div>` : '';
                stationDiv.innerHTML = `<div class="station-name">${station.name}</div>${lodgingText}`;
                const tokensContainer = document.createElement('div');
                tokensContainer.style.position = 'relative';
                tokensContainer.style.height = '25px';
                stationDiv.appendChild(tokensContainer);
                grid.appendChild(stationDiv);
            });
        }

        function renderPlayerInfoCards() {
            const container = document.getElementById('game-info');
            container.innerHTML = '';
            gameState.players.forEach((player, index) => {
                const card = document.createElement('div');
                card.className = 'info-card';
                card.id = `player-info-${index}`;
                card.innerHTML = `
                    <h3 style="color: ${player.color}">${player.name}</h3>
                    <div class="player-stats">
                        <div class="stat-item">
                            <div class="stat-label">ç¾åœ¨åœ°</div>
                            <div class="stat-value" id="pos-${index}"></div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">å®¿å ´æ•°</div>
                            <div class="stat-value"><span id="station-${index}"></span>/55</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">æ‰€æŒé‡‘</div>
                            <div class="stat-value"><span id="money-${index}"></span>ä¸¡</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">æ—¥æ•°</div>
                            <div class="stat-value"><span id="days-${index}"></span>æ—¥</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">ğŸ’ª ä½“åŠ›</div>
                            <div class="stat-value stamina-display" id="stamina-${index}"></div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">ğŸ’ æŒã¡ç‰©</div>
                            <div class="stat-value inventory-display" id="inventory-${index}"></div>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function updateAllUI() {
            updatePlayerTokens();
            updatePlayerInfo();
            updateTurnIndicator();
            updateControls();
        }

        function updatePlayerTokens() {
            document.querySelectorAll('.player-token').forEach(t => t.remove());
            gameState.players.forEach((player, index) => {
                if (player.hasFinished) return;
                const stationDiv = document.querySelectorAll('.station')[player.position];
                const token = document.createElement('div');
                token.className = 'player-token';
                token.style.backgroundColor = player.color;
                token.style.left = `${5 + index * 25}px`;
                stationDiv.querySelector('[style*="position: relative"]').appendChild(token);
            });
        }

        function updatePlayerInfo() {
            gameState.players.forEach((player, index) => {
                document.getElementById(`pos-${index}`).textContent = TOKAIDO_STATIONS[player.position].name;
                document.getElementById(`station-${index}`).textContent = player.position + 1;
                document.getElementById(`money-${index}`).textContent = player.money;
                document.getElementById(`days-${index}`).textContent = player.days;
                
                // Update stamina display
                const staminaElement = document.getElementById(`stamina-${index}`);
                const stamina = Math.max(0, player.stamina || 0);
                staminaElement.textContent = `${stamina}/100`;
                
                // Color coding for stamina
                staminaElement.className = 'stat-value stamina-display';
                if (stamina <= 20) {
                    staminaElement.classList.add('stamina-low');
                } else if (stamina <= 50) {
                    staminaElement.classList.add('stamina-medium');
                } else {
                    staminaElement.classList.add('stamina-high');
                }
                
                // Update inventory display
                const inventoryElement = document.getElementById(`inventory-${index}`);
                if (player.inventory.length === 0) {
                    inventoryElement.innerHTML = '<span style="color: #666;">ãªã—</span>';
                } else {
                    // Count items
                    const itemCounts = {};
                    player.inventory.forEach(itemKey => {
                        itemCounts[itemKey] = (itemCounts[itemKey] || 0) + 1;
                    });
                    
                    // Create inventory display HTML
                    const inventoryItems = Object.keys(itemCounts).map(itemKey => {
                        const item = ITEMS[itemKey];
                        const count = itemCounts[itemKey];
                        const countText = count > 1 ? `x${count}` : '';
                        return `<span title="${item.description}">${item.emoji}${item.name}${countText}</span>`;
                    });
                    
                    inventoryElement.innerHTML = inventoryItems.join(', ');
                }
                
                const card = document.getElementById(`player-info-${index}`);
                if (index === gameState.currentPlayerIndex) {
                    card.classList.add('active');
                } else {
                    card.classList.remove('active');
                }
            });
        }

        function updateTurnIndicator() {
            const currentPlayer = gameState.players[gameState.currentPlayerIndex];
            const indicator = document.getElementById('turn-indicator');
            indicator.textContent = `${currentPlayer.name}ã•ã‚“ã®ç•ªã§ã™`;
            indicator.style.color = currentPlayer.color;
        }

        function updateControls() {
            const diceEl = document.getElementById('dice');
            const shopBtn = document.getElementById('shop-btn');
            const currentPlayer = gameState.players[gameState.currentPlayerIndex];
            const currentStation = TOKAIDO_STATIONS[currentPlayer.position];

            // ã‚µã‚¤ã‚³ãƒ­ã®çŠ¶æ…‹ç®¡ç†
            if (gameState.isGameBlocked || currentPlayer.hasFinished) {
                diceEl.classList.add('disabled');
                diceEl.title = "ç¾åœ¨ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“";
            } else if (currentPlayer.isResting) {
                diceEl.classList.add('disabled');
                diceEl.title = "ä½“åŠ›ãŒã‚¼ãƒ­ã§ã™ã€‚ä¼‘ã‚“ã§ä½“åŠ›ã‚’å›å¾©ã—ã¦ãã ã•ã„";
                // ä½“åŠ›ã‚¼ãƒ­ã®å ´åˆã€ä¼‘ã¿ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
                showRestOption();
                return;
            } else {
                diceEl.classList.remove('disabled');
                diceEl.title = "ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹";
            }

            shopBtn.style.display = currentStation.market && !gameState.isGameBlocked ? 'inline-block' : 'none';
        }

        function showRestOption() {
            const currentPlayer = gameState.players[gameState.currentPlayerIndex];
            showModal(
                `${currentPlayer.name}ã•ã‚“ã¯ä½“åŠ›åˆ‡ã‚Œã§ã™`,
                "ä½“åŠ›ãŒã‚¼ãƒ­ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã®ã‚¿ãƒ¼ãƒ³ã¯ä¼‘ã‚“ã§ä½“åŠ›ã‚’å›å¾©ã—ã¾ã—ã‚‡ã†ã€‚",
                [{text: "ä¼‘ã‚“ã§ä½“åŠ›ã‚’å›å¾©ã™ã‚‹", effect: {}}],
                `<div style="text-align: center; padding: 20px;">
                    <div style="font-size: 3em; margin-bottom: 10px;">ğŸ˜´</div>
                    <p>ä½“åŠ›: ${currentPlayer.stamina}/100</p>
                    <p>ä¼‘ã‚€ã“ã¨ã§ä½“åŠ›ãŒ20å›å¾©ã—ã¾ã™ã€‚</p>
                </div>`
            );
        }

        function restPlayer() {
            const currentPlayer = gameState.players[gameState.currentPlayerIndex];
            currentPlayer.stamina = Math.min(100, currentPlayer.stamina + 20);
            currentPlayer.days += 1; // ä¼‘ã‚€ã“ã¨ã§1æ—¥çµŒé
            currentPlayer.isResting = false; // ä¼‘æ¯ãƒ•ãƒ©ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ
            
            updateAllUI();
            
            showModal(
                "ä¼‘æ¯å®Œäº†",
                `${currentPlayer.name}ã•ã‚“ã¯ä¼‘æ¯ã‚’å–ã‚Šã€ä½“åŠ›ãŒ20å›å¾©ã—ã¾ã—ãŸã€‚`,
                [{text: "æ¬¡ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚¿ãƒ¼ãƒ³ã¸", effect: {}}],
                `<div style="text-align: center; padding: 20px;">
                    <div style="font-size: 3em; margin-bottom: 10px;">ğŸ˜Š</div>
                    <p>ç¾åœ¨ã®ä½“åŠ›: ${currentPlayer.stamina}/100</p>
                </div>`,
                true
            );
        }

        // --- GAME LOGIC --- //
        function rollDice() {
            if (gameState.isGameBlocked) return;
            const currentPlayer = gameState.players[gameState.currentPlayerIndex];
            if (currentPlayer.hasFinished) return;
            
            gameState.isGameBlocked = true;
            updateControls();

            const player = gameState.players[gameState.currentPlayerIndex];
            const diceEl = document.getElementById('dice');
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
            diceEl.classList.add('rolling');
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã¯ãƒ©ãƒ³ãƒ€ãƒ ãªç›®ã‚’è¡¨ç¤º
            const diceValues = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'];
            let animationInterval = setInterval(() => {
                diceEl.textContent = diceValues[Math.floor(Math.random() * 6)];
            }, 100);
            
            // 1ç§’å¾Œã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†
            setTimeout(() => {
                clearInterval(animationInterval);
                diceEl.classList.remove('rolling');
                
                let result = Math.floor(Math.random() * 6) + 1;
                
                // å›£å­ãƒœãƒ¼ãƒŠã‚¹é©ç”¨
                const hadDangoBonus = player.activeEffects.dangoBonus;
                if (hadDangoBonus) {
                    result = Math.min(result + 1, 6);
                    player.activeEffects.dangoBonus = false;
                }
                
                diceEl.textContent = diceValues[result - 1];
                
                if (hadDangoBonus) {
                    showModal("å›£å­ã®åŠ¹æœ", `ã‚µã‚¤ã‚³ãƒ­ã®ç›®ãŒ${result}ã«ãªã‚Šã¾ã—ãŸï¼`, [{text: "é€²ã‚€", effect: {}}]);
                    setTimeout(() => {
                        closeModal(true);
                        setTimeout(() => movePlayer(result), 500);
                    }, 1500);
                } else {
                    setTimeout(() => movePlayer(result), 800);
                }
            }, 1000);
        }

        function movePlayer(steps) {
            const player = gameState.players[gameState.currentPlayerIndex];
            let newPosition = player.position + steps;
            newPosition = Math.min(newPosition, TOKAIDO_STATIONS.length - 1);

            let moveCost = 0;
            let lodgingCost = 0;
            let usedWaraji = false;

            if (steps > 0) {
                // è‰é‹åŠ¹æœé©ç”¨
                moveCost = steps * 10;
                if (player.activeEffects.warajiTurns > 0) {
                    moveCost = Math.floor(moveCost / 2);
                    player.activeEffects.warajiTurns--;
                    usedWaraji = true;
                }
                player.money -= moveCost;
                player.days += Math.ceil(steps / 2);
                
                // ä½“åŠ›æ¸›å°‘ï¼ˆç§»å‹•è·é›¢ã«å¿œã˜ã¦ï¼‰
                const staminaLoss = steps * 8; // 1ãƒã‚¹ç§»å‹•ã«ã¤ã8ä½“åŠ›æ¸›å°‘
                player.stamina = Math.max(0, player.stamina - staminaLoss);
                
                // ä½“åŠ›0åˆ¤å®šã‚’å®¿æ³Šå›å¾©å‰ã«è¨˜éŒ²
                const isExhausted = (player.stamina <= 0);
                player.isResting = isExhausted;
            }
            player.position = newPosition;

            // å®¿è³ƒã®æ”¯æ‰•ã„ã¨ä½“åŠ›å›å¾©ï¼ˆå‰é€²æ™‚ã®ã¿ï¼‰
            let staminaRecovered = 0;
            if (steps > 0 && newPosition > 0) {
                const currentStation = TOKAIDO_STATIONS[newPosition];
                if (currentStation.lodging > 0) {
                    lodgingCost = currentStation.lodging;
                    player.money -= lodgingCost;
                    
                    // å®¿è³ƒã«å¿œã˜ãŸä½“åŠ›å›å¾©ï¼ˆé«˜ã„å®¿ã»ã©å¤§ããå›å¾©ï¼‰
                    if (currentStation.lodging >= 45) {
                        staminaRecovered = 40; // é«˜ç´šå®¿å ´
                    } else if (currentStation.lodging >= 35) {
                        staminaRecovered = 30; // ä¸­ç´šå®¿å ´
                    } else if (currentStation.lodging >= 25) {
                        staminaRecovered = 20; // ä¸€èˆ¬å®¿å ´
                    } else {
                        staminaRecovered = 15; // å°ã•ãªå®¿å ´
                    }
                    
                    player.stamina = Math.min(100, player.stamina + staminaRecovered);
                }
            }

            updateAllUI();

            const currentStation = TOKAIDO_STATIONS[newPosition];
            
            // å‰é€²æ™‚ã®ã¿å®¿å ´æƒ…å ±ã‚’è¡¨ç¤ºï¼ˆå¾Œæˆ»ã‚Šã§ã¯è¡¨ç¤ºã—ãªã„ï¼‰
            if (steps > 0 && STATION_INFO[newPosition]) {
                setTimeout(() => {
                    showArrivalInfo(newPosition, steps, moveCost, lodgingCost, usedWaraji, staminaRecovered);
                }, 500);
                return;
            }
            
            if (newPosition === TOKAIDO_STATIONS.length - 1) {
                player.hasFinished = true;
                gameState.finishedPlayers++;
                showModal(`${player.name}ã•ã‚“ãŒã‚´ãƒ¼ãƒ«ï¼`, `è¦‹äº‹ã€äº¬ã®éƒ½ã«ãŸã©ã‚Šç€ãã¾ã—ãŸï¼`);
                if (gameState.finishedPlayers === gameState.players.length) {
                    setTimeout(showVictory, 2000);
                }
            } else if (currentStation.event && EVENTS[currentStation.event] && steps > 0) {
                // ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸå®¿å ´ã‚’è¨˜éŒ²ã—ã¦ã€åŒã˜ã‚¿ãƒ¼ãƒ³ã§ã®å†ç™ºç”Ÿã‚’é˜²ã
                if (!player.eventTriggeredThisTurn || player.eventTriggeredThisTurn !== newPosition) {
                    player.eventTriggeredThisTurn = newPosition;
                    setTimeout(() => triggerEvent(currentStation.event), 1500);
                } else {
                    endTurn();
                }
            } else {
                endTurn();
            }
        }

        function endTurn() {
            if (gameState.finishedPlayers === gameState.players.length) {
                showVictory();
                return;
            }

            // ç¾åœ¨ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ©ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ
            gameState.players[gameState.currentPlayerIndex].eventTriggeredThisTurn = null;

            do {
                gameState.currentPlayerIndex = (gameState.currentPlayerIndex + 1) % gameState.players.length;
            } while (gameState.players[gameState.currentPlayerIndex].hasFinished);
            
            gameState.isGameBlocked = false;
            updateAllUI();
        }

        function triggerEvent(eventType) {
            const event = EVENTS[eventType];
            if (!event) {
                endTurn();
                return;
            }
            showModal(event.title, event.description, event.choices);
        }

        function resolveChoice(choice) {
            const player = gameState.players[gameState.currentPlayerIndex];
            
            // ä¼‘ã¿å‡¦ç†ã®ç‰¹åˆ¥ã‚±ãƒ¼ã‚¹
            if (choice.text === "ä¼‘ã‚“ã§ä½“åŠ›ã‚’å›å¾©ã™ã‚‹") {
                closeModal(true);
                restPlayer();
                return;
            }
            
            // ã‚¢ã‚¤ãƒ†ãƒ å¿…è¦ãªé¸æŠè‚¢ã®ç¢ºèª
            if (choice.requiredItem) {
                const itemIndex = player.inventory.findIndex(item => item === choice.requiredItem);
                if (itemIndex === -1) {
                    // ã‚¢ã‚¤ãƒ†ãƒ ãŒãªã„å ´åˆã¯è³¼å…¥ç”»é¢ã‚’è¡¨ç¤º
                    showItemPurchaseForEvent(choice);
                    return;
                }
                // ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ¶ˆè²»
                player.inventory.splice(itemIndex, 1);
            }
            
            // æ–™é‡‘ãŒå¿…è¦ãªé¸æŠè‚¢ã®ç¢ºèª
            if (choice.cost && player.money < choice.cost) {
                showModal("è³‡é‡‘ä¸è¶³", "ãŠé‡‘ãŒè¶³ã‚Šã¾ã›ã‚“ã€‚");
                return;
            }
            
            if (choice.type === 'haggle' || choice.type === 'gamble') {
                const isSuccess = Math.random() < 0.5;
                const outcome = isSuccess ? choice.success : choice.failure;
                closeModal(true); 
                setTimeout(() => showModal(isSuccess ? "æˆåŠŸï¼" : "å¤±æ•—â€¦", outcome.text, [{text: "ç¶šã‘ã‚‹", effect: outcome.effect}]), 400);
                return;
            }

            const isBadEvent = (choice.effect.money < 0) || (choice.effect.days > 0) || (choice.effect.steps < 0);
            if (isBadEvent) {
                const omamoriIndex = player.inventory.findIndex(item => item === 'omamori');
                if (omamoriIndex !== -1) {
                    if (confirm("ãŠå®ˆã‚Šã‚’ä½¿ã„ã¾ã™ã‹ï¼Ÿæ‚ªã„çµæœã‚’æ‰“ã¡æ¶ˆã›ã¾ã™ã€‚")) {
                        player.inventory.splice(omamoriIndex, 1);
                        showModal("ãŠå®ˆã‚Šã®åŠ¹æœ", "ãŠå®ˆã‚ŠãŒæ‚ªã„å‡ºæ¥äº‹ã‹ã‚‰ã‚ãªãŸã‚’å®ˆã£ãŸï¼");
                        return;
                    }
                }
            }

            if (choice.effect.money) player.money += choice.effect.money;
            if (choice.effect.days) player.days += choice.effect.days;
            if (choice.effect.item) player.inventory.push(choice.effect.item);

            updatePlayerInfo();

            if (choice.effect.steps) {
                closeModal(true);
                setTimeout(() => {
                    // å¾Œæˆ»ã‚Šã®å ´åˆã¯ç›´æ¥ä½ç½®ã‚’å¤‰æ›´ã—ã¦ã‚¿ãƒ¼ãƒ³çµ‚äº†
                    if (choice.effect.steps < 0) {
                        const player = gameState.players[gameState.currentPlayerIndex];
                        let newPosition = player.position + choice.effect.steps;
                        newPosition = Math.max(0, newPosition); // 0æœªæº€ã«ãªã‚‰ãªã„ã‚ˆã†ã«
                        player.position = newPosition;
                        updateAllUI();
                        endTurn();
                    } else {
                        movePlayer(choice.effect.steps);
                    }
                }, 1000);
            } else {
                closeModal(true);
                // å®¿å ´æƒ…å ±è¡¨ç¤ºå¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚§ãƒƒã‚¯
                setTimeout(() => {
                    const player = gameState.players[gameState.currentPlayerIndex];
                    checkForEventsOrEndTurn(player.position);
                }, 500);
            }
        }

        function showModal(title, description, choices = [], customHTML = '', isInfoModal = false) {
            const modal = document.getElementById('modal');
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-description').innerHTML = description;
            
            const listDiv = document.getElementById('modal-list');
            listDiv.innerHTML = customHTML;
            
            const choicesDiv = document.getElementById('modal-choices');
            choicesDiv.innerHTML = '';

            if (choices.length > 0) {
                choices.forEach(choice => {
                    const button = document.createElement('button');
                    button.className = 'btn btn-primary';
                    button.textContent = choice.text;
                    button.onclick = () => resolveChoice(choice);
                    choicesDiv.appendChild(button);
                });
            } else {
                 const button = document.createElement('button');
                 button.className = 'btn btn-primary';
                 button.textContent = 'ç¶šã‘ã‚‹';
                 button.onclick = isInfoModal ? closeInfoModal : closeModal;
                 choicesDiv.appendChild(button);
            }
            modal.style.display = 'flex';
            gameState.isGameBlocked = true;
            updateControls();
        }

        function closeModal(keepBlocked = false) {
            document.getElementById('modal').style.display = 'none';
            if (!keepBlocked) {
                endTurn();
            }
        }

        function closeInfoModal() {
            document.getElementById('modal').style.display = 'none';
            gameState.isGameBlocked = false;
            updateControls();
        }

        function showShop() {
            const player = gameState.players[gameState.currentPlayerIndex];
            const currentStation = TOKAIDO_STATIONS[player.position];
            
            if (!currentStation.market) {
                showModal("ã‚¢ã‚¤ãƒ†ãƒ å±‹", "ã“ã“ã«ã¯ã‚¢ã‚¤ãƒ†ãƒ å±‹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚");
                return;
            }
            
            let shopHTML = '<div class="shop-items">';
            Object.keys(ITEMS).forEach(itemKey => {
                const item = ITEMS[itemKey];
                if (item.cost > 0) { // è³¼å…¥å¯èƒ½ã‚¢ã‚¤ãƒ†ãƒ ã®ã¿è¡¨ç¤º
                    const canAfford = player.money >= item.cost;
                    shopHTML += `
                        <div class="shop-item">
                            <div class="item-info">
                                <div style="display: flex; align-items: center; margin-bottom: 5px;">
                                    <span style="font-size: 1.5em; margin-right: 8px;">${item.emoji || 'ğŸ“¦'}</span>
                                    <strong>${item.name}</strong>
                                </div>
                                <small>${item.description}</small>
                            </div>
                            <div>
                                <button class="btn ${canAfford ? 'btn-primary' : 'btn-secondary'}" 
                                        ${canAfford ? '' : 'disabled'}
                                        onclick="buyItem('${itemKey}')">
                                    ${item.cost}ä¸¡
                                </button>
                            </div>
                        </div>
                    `;
                }
            });
            shopHTML += '</div>';
            
            showModal("ğŸª ã‚¢ã‚¤ãƒ†ãƒ å±‹", `ã‚ˆã†ã“ãï¼ä½•ã‹å¿…è¦ãªã‚‚ã®ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ<br><br>ã‚ãªãŸã®æ‰€æŒé‡‘: ${player.money}ä¸¡`, [], shopHTML);
        }
        
        function showItemPurchaseForEvent(eventChoice) {
            const player = gameState.players[gameState.currentPlayerIndex];
            const requiredItem = ITEMS[eventChoice.requiredItem];
            
            console.log('Required Item:', eventChoice.requiredItem, requiredItem);
            
            const canAfford = player.money >= requiredItem.cost;
            
            let purchaseHTML = `
                <div class="event-purchase">
                    <p>ã“ã®é¸æŠè‚¢ã«ã¯ <strong>${requiredItem.emoji || ''} ${requiredItem.name}</strong> ãŒå¿…è¦ã§ã™ã€‚</p>
                    <div class="required-item-info">
                        <div style="font-size: 2em; margin-bottom: 10px;">${requiredItem.emoji || 'ğŸ“¦'}</div>
                        <strong>${requiredItem.name}</strong><br>
                        <span style="color: #666;">${requiredItem.cost}ä¸¡</span><br>
                        <small>${requiredItem.description}</small>
                    </div>
                    <p><strong>ã‚ãªãŸã®æ‰€æŒé‡‘: ${player.money}ä¸¡</strong></p>
                    ${canAfford ? 
                        `<button class="btn btn-primary" onclick="buyItemForEvent('${eventChoice.requiredItem}', ${JSON.stringify(eventChoice).replace(/"/g, '&quot;')})">
                            ${requiredItem.cost}ä¸¡ã§è³¼å…¥ã—ã¦é¸æŠè‚¢ã‚’å®Ÿè¡Œã™ã‚‹
                        </button>` :
                        `<p style="color: red; font-weight: bold;">ãŠé‡‘ãŒè¶³ã‚Šã¾ã›ã‚“ã€‚</p>`
                    }
                    <button class="btn btn-secondary" onclick="closeModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                </div>
            `;
            
            showModal("ã‚¢ã‚¤ãƒ†ãƒ ãŒå¿…è¦ã§ã™", "", [], purchaseHTML, true);
        }
        
        function buyItemForEvent(itemKey, eventChoice) {
            const player = gameState.players[gameState.currentPlayerIndex];
            const item = ITEMS[itemKey];
            
            if (player.money >= item.cost) {
                player.money -= item.cost;
                player.inventory.push(itemKey);
                updatePlayerInfo();
                closeModal();
                // ã‚¢ã‚¤ãƒ†ãƒ è³¼å…¥å¾Œã€é¸æŠè‚¢ã‚’å†å®Ÿè¡Œ
                setTimeout(() => resolveChoice(eventChoice), 100);
            } else {
                showModal("è³¼å…¥å¤±æ•—", "ãŠé‡‘ãŒè¶³ã‚Šã¾ã›ã‚“ã€‚", [], '', true);
            }
        }
        
        function buyItem(itemKey) {
            const player = gameState.players[gameState.currentPlayerIndex];
            const item = ITEMS[itemKey];
            
            if (player.money >= item.cost) {
                player.money -= item.cost;
                player.inventory.push(itemKey);
                updatePlayerInfo();
                showModal(`${player.name}ã•ã‚“ - è³¼å…¥å®Œäº†`, `${item.name}ã‚’è³¼å…¥ã—ã¾ã—ãŸï¼`, [], '', true);
            } else {
                showModal("è³¼å…¥å¤±æ•—", "ãŠé‡‘ãŒè¶³ã‚Šã¾ã›ã‚“ã€‚", [], '', true);
            }
        }

        function showInventory() {
            const player = gameState.players[gameState.currentPlayerIndex];
            
            if (player.inventory.length === 0) {
                showModal(`ğŸ’ ${player.name}ã•ã‚“ã®æŒã¡ç‰©`, "ä½•ã‚‚æŒã£ã¦ã„ã¾ã›ã‚“ã€‚", [], '', true);
                return;
            }
            
            let inventoryHTML = '<div class="inventory-items">';
            const itemCounts = {};
            
            // ã‚¢ã‚¤ãƒ†ãƒ ã®å€‹æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
            player.inventory.forEach(itemKey => {
                itemCounts[itemKey] = (itemCounts[itemKey] || 0) + 1;
            });
            
            Object.keys(itemCounts).forEach(itemKey => {
                const item = ITEMS[itemKey];
                const count = itemCounts[itemKey];
                inventoryHTML += `
                    <div class="inventory-item">
                        <div class="item-info">
                            <strong>${item.name}</strong> Ã— ${count}<br>
                            <small>${item.description}</small>
                        </div>
                        <div>
                            <button class="btn btn-primary" onclick="useItem('${itemKey}')">
                                ä½¿ã†
                            </button>
                        </div>
                    </div>
                `;
            });
            inventoryHTML += '</div>';
            
            showModal(`ğŸ’ ${player.name}ã•ã‚“ã®æŒã¡ç‰©`, `æ‰€æŒé‡‘: ${player.money}ä¸¡<br><br>`, [], inventoryHTML, true);
        }
        
        function useItem(itemKey) {
            const player = gameState.players[gameState.currentPlayerIndex];
            const itemIndex = player.inventory.findIndex(item => item === itemKey);
            
            if (itemIndex === -1) {
                showModal("ã‚¨ãƒ©ãƒ¼", "ãã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’æŒã£ã¦ã„ã¾ã›ã‚“ã€‚", [], '', true);
                return;
            }
            
            const item = ITEMS[itemKey];
            
            switch(itemKey) {
                case 'dango':
                    // æ¬¡ã®ã‚µã‚¤ã‚³ãƒ­+1åŠ¹æœã‚’è¨­å®š
                    player.activeEffects.dangoBonus = true;
                    player.inventory.splice(itemIndex, 1);
                    showModal(`${player.name}ã•ã‚“ - å›£å­ã‚’é£Ÿã¹ãŸ`, "ç¾å‘³ã—ã„ï¼æ¬¡ã®ã‚µã‚¤ã‚³ãƒ­ã®ç›®ãŒ+1ã•ã‚Œã¾ã™ã€‚", [], '', true);
                    break;
                    
                case 'waraji':
                    player.activeEffects.warajiTurns = 3;
                    player.inventory.splice(itemIndex, 1);
                    showModal(`${player.name}ã•ã‚“ - è‰é‹ã‚’å±¥ã„ãŸ`, "ä¸ˆå¤«ãªè‰é‹ã§è¶³å–ã‚ŠãŒè»½ã„ï¼3ã‚¿ãƒ¼ãƒ³ã®é–“ã€ç§»å‹•è²»ãŒåŠé¡ã«ãªã‚Šã¾ã™ã€‚", [], '', true);
                    break;
                    
                case 'map':
                    // å¤åœ°å›³ã¯ç§»å‹•æ™‚ã«ä½¿ç”¨
                    showModal(`${player.name}ã•ã‚“ - å¤åœ°å›³ä½¿ç”¨`, "1ï½3ãƒã‚¹ã®å¥½ããªè·é›¢ã‚’é¸ã‚“ã§ç§»å‹•ã§ãã¾ã™ã€‚", [
                        {text: "1ãƒã‚¹é€²ã‚€", effect: {steps: 1}},
                        {text: "2ãƒã‚¹é€²ã‚€", effect: {steps: 2}},
                        {text: "3ãƒã‚¹é€²ã‚€", effect: {steps: 3}}
                    ]);
                    player.inventory.splice(itemIndex, 1);
                    return;
                    
                default:
                    showModal("ä½¿ç”¨ä¸å¯", "ã“ã®ã‚¢ã‚¤ãƒ†ãƒ ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚", [], '', true);
                    return;
            }
            
            updatePlayerInfo();
        }

        function showVictory() {
            let message = '<h3>æœ€çµ‚çµæœ</h3>';
            gameState.players.sort((a, b) => (b.money - b.days*10) - (a.money - a.days*10));
            gameState.players.forEach((p, i) => {
                message += `<p>${i+1}ä½: ${p.name} (${p.money}ä¸¡, ${p.days}æ—¥)</p>`;
            });
            showModal("æ—…ã®çµ‚ã‚ã‚Š", message);
        }

        function showStationInfo(stationIndex = null) {
            const player = gameState.players[gameState.currentPlayerIndex];
            const position = stationIndex !== null ? stationIndex : player.position;
            const station = TOKAIDO_STATIONS[position];
            const stationInfo = STATION_INFO[position];
            
            if (stationInfo) {
                let imageHTML = '';
                if (stationInfo.image) {
                    imageHTML = `
                        <img src="${stationInfo.image}" alt="${stationInfo.title}ã®æµ®ä¸–çµµ" class="station-image" loading="lazy">
                        <div class="image-caption">æ­Œå·åºƒé‡ã€Œæ±æµ·é“äº”åä¸‰æ¬¡ã€ã‚ˆã‚Šï¼ˆãƒ¡ãƒˆãƒ­ãƒãƒªã‚¿ãƒ³ç¾è¡“é¤¨æ‰€è”µ - CC0ï¼‰</div>
                    `;
                }
                
                showModal(
                    `${stationInfo.emoji} ${stationInfo.title}`,
                    stationInfo.description,
                    [],
                    imageHTML,
                    true
                );
            } else {
                // åŸºæœ¬çš„ãªå®¿å ´æƒ…å ±
                let description = `æ±æµ·é“${position + 1}ç•ªç›®ã®å®¿å ´ã€Œ${station.name}ã€ã§ã™ã€‚`;
                let features = [];
                
                if (station.market) {
                    features.push("ğŸ’° ã‚¢ã‚¤ãƒ†ãƒ ã®å£²è²·ãŒã§ãã‚‹å¸‚å ´ãŒã‚ã‚Šã¾ã™");
                }
                if (station.event) {
                    features.push("ğŸª ç‰¹åˆ¥ãªã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™");
                }
                
                if (features.length > 0) {
                    description += "<br><br>" + features.join("<br>");
                }
                
                // ç¾åœ¨ã„ã‚‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¡¨ç¤º
                const playersHere = gameState.players.filter(p => p.position === position);
                if (playersHere.length > 0) {
                    const playerNames = playersHere.map(p => p.name).join('ã€');
                    description += `<br><br>ğŸš¶â€â™‚ï¸ ç¾åœ¨ã“ã“ã«ã„ã‚‹æ—…äºº: ${playerNames}`;
                }
                
                showModal(
                    `ğŸ® ${station.name}`,
                    description,
                    [],
                    '',
                    true
                );
            }
        }

        function showArrivalInfo(position, steps = 0, moveCost = 0, lodgingCost = 0, usedWaraji = false, staminaRecovered = 0) {
            const station = TOKAIDO_STATIONS[position];
            const stationInfo = STATION_INFO[position];
            
            if (stationInfo) {
                let imageHTML = '';
                if (stationInfo.image) {
                    imageHTML = `
                        <img src="${stationInfo.image}" alt="${stationInfo.title}ã®æµ®ä¸–çµµ" class="station-image" loading="lazy">
                        <div class="image-caption">æ­Œå·åºƒé‡ã€Œæ±æµ·é“äº”åä¸‰æ¬¡ã€ã‚ˆã‚Šï¼ˆãƒ¡ãƒˆãƒ­ãƒãƒªã‚¿ãƒ³ç¾è¡“é¤¨æ‰€è”µï¼‰</div>
                    `;
                }
                
                let costInfo = '';
                if (steps > 0) {
                    costInfo += '<br><br><div style="background: #f5f5f5; border: 1px solid #ddd; border-radius: 8px; padding: 10px; margin-top: 10px;">';
                    costInfo += '<strong>ğŸ“Š ç§»å‹•è²»ç”¨ã®è©³ç´°</strong><br>';
                    
                    if (moveCost > 0) {
                        const originalCost = steps * 10;
                        if (usedWaraji) {
                            costInfo += `ğŸš¶ ç§»å‹•è²»ç”¨: ${originalCost}ä¸¡ â†’ ${moveCost}ä¸¡ (ğŸ‘¡è‰é‹åŠ¹æœã§åŠé¡)<br>`;
                        } else {
                            costInfo += `ğŸš¶ ç§»å‹•è²»ç”¨: ${moveCost}ä¸¡ (${steps}ãƒã‚¹ Ã— 10ä¸¡)<br>`;
                        }
                    }
                    
                    if (lodgingCost > 0) {
                        costInfo += `ğŸ¨ å®¿è³ƒ: ${lodgingCost}ä¸¡<br>`;
                    }
                    
                    if (staminaRecovered > 0) {
                        costInfo += `ğŸ’ª ä½“åŠ›å›å¾©: +${staminaRecovered}<br>`;
                    }
                    
                    // ä½“åŠ›åˆ‡ã‚Œè­¦å‘Š
                    const currentPlayer = gameState.players[gameState.currentPlayerIndex];
                    if (currentPlayer.isResting) {
                        costInfo += `<div style="color: red; font-weight: bold; margin-top: 5px;">âš ï¸ ä½“åŠ›ãŒåˆ‡ã‚Œã¾ã—ãŸï¼æ¬¡ã®ã‚¿ãƒ¼ãƒ³ã¯ä¼‘æ¯ãŒå¿…è¦ã§ã™ã€‚</div>`;
                    }
                    
                    const totalCost = moveCost + lodgingCost;
                    if (totalCost > 0) {
                        costInfo += `<strong>ğŸ’° åˆè¨ˆæ”¯æ‰•é¡: ${totalCost}ä¸¡</strong>`;
                    }
                    
                    costInfo += '</div>';
                }
                
                showModal(
                    `${stationInfo.emoji} ${stationInfo.title} ã«åˆ°ç€ï¼`,
                    stationInfo.description + costInfo,
                    [{text: "æ—…ã‚’ç¶šã‘ã‚‹", effect: {}}],
                    imageHTML
                );
            } else {
                // å®¿å ´æƒ…å ±ãŒãªã„å ´åˆã¯ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚§ãƒƒã‚¯ã¾ãŸã¯ã‚¿ãƒ¼ãƒ³çµ‚äº†ã«é€²ã‚€
                checkForEventsOrEndTurn(position);
            }
        }
        
        function checkForEventsOrEndTurn(position) {
            const player = gameState.players[gameState.currentPlayerIndex];
            const currentStation = TOKAIDO_STATIONS[position];
            
            if (position === TOKAIDO_STATIONS.length - 1) {
                player.hasFinished = true;
                gameState.finishedPlayers++;
                showModal(`${player.name}ã•ã‚“ãŒã‚´ãƒ¼ãƒ«ï¼`, `è¦‹äº‹ã€äº¬ã®éƒ½ã«ãŸã©ã‚Šç€ãã¾ã—ãŸï¼`);
                if (gameState.finishedPlayers === gameState.players.length) {
                    setTimeout(showVictory, 2000);
                }
            } else if (currentStation.event && EVENTS[currentStation.event]) {
                if (!player.eventTriggeredThisTurn || player.eventTriggeredThisTurn !== position) {
                    player.eventTriggeredThisTurn = position;
                    setTimeout(() => triggerEvent(currentStation.event), 500);
                } else {
                    endTurn();
                }
            } else {
                endTurn();
            }
        }

        function resetGame() {
            if (confirm('æ–°ã—ã„æ—…ã‚’å§‹ã‚ã¾ã™ã‹ï¼Ÿ')) {
                window.location.reload();
            }
        }

        // --- SCRIPT START --- //
        window.onload = () => {
            updatePlayerInputs();
        };

    </script>