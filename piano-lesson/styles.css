:root {
  --bg: #0f1115;
  --fg: #e6e6e6;
  --muted: #9aa4b2;
  --accent: #5ac8fa;
  --ok: #34c759;
  --warn: #ff9f0a;
  --error: #ff453a;
  --key-white: #ffffff;
  --key-white-edge: #d6d6d6;
  --key-black: #111216;
  --key-active: #ffe082;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans JP", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
  background: radial-gradient(1200px 600px at 20% -10%, #1a1f2a 0%, #0f1115 42%, #0f1115 100%);
  color: var(--fg);
}

.app-header, .app-footer {
  padding: 12px 16px;
}
.app-header { display: flex; gap: 16px; align-items: center; flex-wrap: wrap; }
.app-header h1 { font-size: 20px; margin: 0; }
.controls { display: flex; gap: 8px; align-items: center; }
.controls select, .controls button {
  background: #171a21;
  color: var(--fg);
  border: 1px solid #2a2f3a;
  border-radius: 8px;
  padding: 8px 10px;
}
.controls button { cursor: pointer; }
.controls button:hover { border-color: var(--accent); }
.status { min-width: 8ch; color: var(--muted); }

.app-main { padding: 8px 16px 24px; }
.lesson-panel { display: flex; gap: 16px; align-items: center; flex-wrap: wrap; margin-bottom: 12px; }
.lesson-panel .hints { color: var(--muted); }

.piano-wrap { display: flex; justify-content: center; overflow-x: auto; }
.piano {
  position: relative;
  display: flex;
  user-select: none;
  touch-action: manipulation;
  height: 220px;
}

/* White keys */
.key.white {
  position: relative;
  width: 56px;
  height: 100%;
  background: linear-gradient(#fff, #f6f6f6);
  border: 1px solid var(--key-white-edge);
  border-bottom-left-radius: 6px;
  border-bottom-right-radius: 6px;
  box-shadow: inset 0 0 0 1px #fff, 0 2px 6px rgba(0,0,0,0.35);
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 8px;
  color: #333;
}
.key.white.active { background: var(--key-active); }

/* Black keys */
.key.black {
  position: absolute;
  width: 36px;
  height: 60%;
  top: 0;
  background: linear-gradient(#23262f, #111216);
  border: 1px solid #000;
  border-bottom-left-radius: 6px;
  border-bottom-right-radius: 6px;
  box-shadow: inset 0 0 0 1px #2b2f3a, 0 2px 6px rgba(0,0,0,0.55);
  color: #ddd;
  z-index: 2;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 6px;
}
.key.black.active { background: #333b4a; }

.key .label { font-size: 12px; opacity: 0.7; }
.key.expected { outline: 3px solid var(--warn); outline-offset: -3px; }
.key.correct { animation: blinkOk 300ms ease; }
.key.wrong { animation: blinkErr 300ms ease; }

@keyframes blinkOk { from { filter: drop-shadow(0 0 4px var(--ok)); } to { filter: none; } }
@keyframes blinkErr { from { filter: drop-shadow(0 0 4px var(--error)); } to { filter: none; } }

@media (max-width: 800px) {
  .key.white { width: 44px; }
  .key.black { width: 28px; }
}
