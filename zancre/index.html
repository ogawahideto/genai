<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALPHARD SmartBuy - ã‚ãªãŸã®ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ•ã‚’å½©ã‚‹è³¢ã„é¸æŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
            color: #333;
            line-height: 1.6;
            overflow-x: hidden; /* æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç¦æ­¢ */
        }
        .app-container {
            max-width: 850px;
            margin: 30px auto;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            overflow: hidden;
        }
        header {
            background: linear-gradient(45deg, #0f4c81 0%, #1e629a 100%);
            color: #fff;
            padding: 35px 20px;
            text-align: center;
            border-bottom: 5px solid #ffcc00;
            position: relative;
            overflow: hidden;
        }
        header h1 {
            margin: 0;
            font-size: 2.8em;
            letter-spacing: 2px;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
        }
        header p {
            font-size: 1.1em;
            margin-top: 10px;
            opacity: 0.9;
        }
        .header-bg-elements::before, .header-bg-elements::after {
            content: '';
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            pointer-events: none;
        }
        .header-bg-elements::before {
            width: 150px;
            height: 150px;
            top: -50px;
            left: -50px;
        }
        .header-bg-elements::after {
            width: 200px;
            height: 200px;
            bottom: -80px;
            right: -80px;
        }

        nav {
            display: flex;
            justify-content: space-around;
            background-color: #e0e9f2;
            padding: 15px 0;
            border-bottom: 1px solid #d0dbe8;
        }
        nav a {
            text-decoration: none;
            color: #0f4c81;
            font-weight: bold;
            padding: 10px 15px;
            border-radius: 25px;
            transition: background-color 0.3s, color 0.3s;
            display: flex;
            align-items: center;
        }
        nav a:hover, nav a.active {
            background-color: #0f4c81;
            color: #ffcc00;
        }
        nav a svg {
            margin-right: 8px;
        }

        .content-section {
            padding: 40px;
        }
        h2 {
            color: #0f4c81;
            text-align: center;
            font-size: 2.2em;
            margin-bottom: 35px;
            position: relative;
        }
        h2::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background-color: #ffcc00;
            margin: 10px auto 0;
            border-radius: 2px;
        }

        .card {
            background-color: #f8fbfd;
            border: 1px solid #e0e9f2;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transition: transform 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
            font-size: 0.95em;
        }
        .form-group input[type="number"],
        .form-group select {
            width: calc(100% - 24px);
            padding: 12px;
            border: 1px solid #cce0f0;
            border-radius: 8px;
            font-size: 1.05em;
            box-sizing: border-box;
            background-color: #fefeff;
        }
        .form-group input[type="range"] {
            width: 100%;
            height: 10px;
            -webkit-appearance: none;
            background: #d0dbe8;
            outline: none;
            border-radius: 5px;
            margin-top: 10px;
        }
        .form-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            background: #0f4c81;
            cursor: pointer;
            border-radius: 50%;
            border: 3px solid #ffcc00;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .form-group input[type="range"]::-moz-range-thumb {
            width: 25px;
            height: 25px;
            background: #0f4c81;
            cursor: pointer;
            border-radius: 50%;
            border: 3px solid #ffcc00;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .range-value {
            font-weight: bold;
            color: #0f4c81;
            margin-left: 10px;
        }
        button {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(90deg, #ffcc00 0%, #f7b731 100%);
            color: #0f4c81;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.4);
        }
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 204, 0, 0.6);
        }
        .result-panel {
            background-color: #e6f7ff;
            border: 2px solid #a8e0f5;
            border-radius: 12px;
            padding: 30px;
            margin-top: 35px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        .result-panel p {
            font-size: 1.2em;
            margin: 10px 0;
            color: #0f4c81;
        }
        .result-panel strong {
            font-size: 1.5em;
            color: #d9004c;
            display: block;
            margin-top: 5px;
        }
        .result-panel .small-note {
            font-size: 0.85em;
            color: #666;
            margin-top: 15px;
        }

        .info-panel {
            background-color: #f0f7f9;
            border-left: 6px solid #ffcc00;
            padding: 20px 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .info-panel h3 {
            color: #0f4c81;
            margin-top: 0;
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        .info-panel ul {
            list-style-type: 'ğŸŒŸ '; /* çµµæ–‡å­—ãƒªã‚¹ãƒˆãƒãƒ¼ã‚«ãƒ¼ */
            padding-left: 25px;
            margin: 0;
        }
        .info-panel li {
            margin-bottom: 10px;
            line-height: 1.8;
        }
        .info-panel a {
            color: #0f4c81;
            font-weight: bold;
            text-decoration: none;
        }
        .info-panel a:hover {
            text-decoration: underline;
        }

        footer {
            background-color: #0f4c81;
            color: #e0e9f2;
            text-align: center;
            padding: 25px 20px;
            border-top: 5px solid #ffcc00;
            font-size: 0.9em;
            border-radius: 0 0 20px 20px;
        }
        footer p {
            margin: 5px 0;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="header-bg-elements"></div>
            <h1>ALPHARD SmartBuy</h1>
            <p>æ®‹ã‚¯ãƒ¬ã§ã€å¤¢ã®ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰ã‚’ã‚‚ã£ã¨èº«è¿‘ã«ï¼</p>
        </header>

        <nav>
            <a href="#simulator" class="active">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calculator"><rect x="9" y="3" width="6" height="18" rx="2"/><line x1="12" y1="9" x2="12" y2="15"/><line x1="9" y1="12" x2="15" y2="12"/></svg>
                ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
            </a>
            <a href="#options-guide">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-book"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
                æ®‹ã‚¯ãƒ¬ã‚¬ã‚¤ãƒ‰
            </a>
            <a href="#faq">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-help-circle"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                ã‚ˆãã‚ã‚‹è³ªå•
            </a>
        </nav>

        <div class="content-section" id="simulator-section">
            <h2>æ®‹ã‚¯ãƒ¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h2>
            <div class="card">
                <form id="calculatorForm">
                    <div class="form-group">
                        <label for="carPrice">âœ¨ ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰æœ¬ä½“ä¾¡æ ¼ (ä¸‡å††)</label>
                        <input type="number" id="carPrice" value="550" min="300" step="10">
                    </div>
                    <div class="form-group">
                        <label for="downPayment">ğŸ’° é ­é‡‘ (ä¸‡å††)</label>
                        <input type="number" id="downPayment" value="0" min="0" step="10">
                    </div>
                    <div class="form-group">
                        <label for="bonusPayment">ğŸ ãƒœãƒ¼ãƒŠã‚¹åŠ ç®—é¡ (ä¸‡å††/å›)</label>
                        <input type="number" id="bonusPayment" value="0" min="0" step="5">
                    </div>
                    <div class="form-group">
                        <label for="term">ğŸ—“ï¸ å¥‘ç´„æœŸé–“</label>
                        <select id="term">
                            <option value="3">3å¹´ (36å›æ‰•ã„)</option>
                            <option value="5">5å¹´ (60å›æ‰•ã„)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="interestRate">ğŸ“Š é‡‘åˆ© (%) <span class="range-value" id="interestRateValue">2.9</span>%</label>
                        <input type="range" id="interestRate" value="2.9" min="1.0" max="7.0" step="0.1">
                    </div>
                    <button type="button" onclick="calculateResidualCredit()">è¨ˆç®—ã—ã¦ã¿ã‚‹ï¼</button>
                </form>
            </div>

            <div class="result-panel hidden" id="resultBox">
                <h3>ã‚ãªãŸã®æ®‹ã‚¯ãƒ¬ãƒ—ãƒ©ãƒ³ã€ã“ã‚Œã§æ±ºã¾ã‚Šï¼</h3>
                <p>æœˆã€…ã®æ”¯æ‰•ã„é¡: <strong><span id="monthlyPayment"></span> å††</strong></p>
                <p>æœ€çµ‚å›æ”¯æ‰•ã„é¡ (æ®‹ä¾¡): <strong><span id="residualValue"></span> å††</strong></p>
                <p>æ”¯æ‰•ç·é¡ (æ¦‚ç®—): <strong><span id="totalPayment"></span> å††</strong></p>
                <p class="small-note">â€»ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ç›®å®‰ã§ã™ã€‚å®Ÿéš›ã®å¥‘ç´„ã¯ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã«ã”ç¢ºèªãã ã•ã„ã€‚</p>
            </div>
        </div>

        <div class="content-section hidden" id="options-guide-section">
            <h2>æ®‹ã‚¯ãƒ¬ã€å¥‘ç´„çµ‚äº†æ™‚ã®ï¼“ã¤ã®é¸æŠè‚¢</h2>
            <div class="info-panel">
                <h3>ğŸš— 1. æ–°ã—ã„ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰ã«ä¹—ã‚Šæ›ãˆï¼</h3>
                <ul>
                    <li>âœ¨ ã„ã¤ã§ã‚‚æœ€æ–°ãƒ¢ãƒ‡ãƒ«ã®ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰ã«ä¹—ã‚Œã‚‹å–œã³ï¼</li>
                    <li>æ®‹ä¾¡ã®æ”¯æ‰•ã„ã¯ä¸è¦ã€‚ã‚¹ãƒãƒ¼ãƒˆã«æ¬¡ã®è»Šã¸ãƒãƒˆãƒ³ã‚¿ãƒƒãƒã€‚</li>
                    <li>æ‰‹é–“ãªãä¹—ã‚Šæ›ãˆãŸã„ã‚ãªãŸã«ãƒ”ãƒƒtariï¼</li>
                </ul>
            </div>
            <div class="info-panel">
                <h3>ğŸ  2. ã‚ãªãŸã®ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰ã‚’è²·ã„å–ã‚‹ï¼</h3>
                <ul>
                    <li>ğŸ’– å¤§åˆ‡ã«ä¹—ã£ã¦ããŸã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰ã‚’å®Œå…¨ã«ã‚ãªãŸã®ã‚‚ã®ã«ï¼</li>
                    <li>æ®‹ä¾¡ã‚’ä¸€æ‹¬ã§æ”¯æ‰•ã†ã‹ã€å†ãƒ­ãƒ¼ãƒ³ã‚’çµ„ã‚“ã§ã˜ã£ãã‚Šã¨ã€‚</li>
                    <li>èµ°è¡Œè·é›¢ã‚„ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã®åˆ¶é™ã‹ã‚‰è§£æ”¾ã•ã‚Œã€æœ¬å½“ã®ã‚ªãƒ¼ãƒŠãƒ¼ã«ï¼</li>
                </ul>
            </div>
            <div class="info-panel">
                <h3>ğŸ”„ 3. ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰ã‚’è¿”å´ã™ã‚‹</h3>
                <ul>
                    <li>ğŸ¤ æ®‹ä¾¡ã®æ”¯æ‰•ã„ã¯ä¸è¦ã€‚ã‚·ãƒ³ãƒ—ãƒ«ã«å¥‘ç´„ã‚’çµ‚äº†ã€‚</li>
                    <li>ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰åŒ–ã«åˆã‚ã›ã¦ã€æŸ”è»Ÿãªé¸æŠã‚’ã€‚</li>
                    <li>**æ³¨æ„**: èµ°è¡Œè·é›¢è¶…éã‚„è»Šã®çŠ¶æ…‹ã«ã‚ˆã£ã¦ã¯è¿½åŠ è²»ç”¨ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€æ—¥é ƒã®ã‚±ã‚¢ãŒé‡è¦ã§ã™ã€‚</li>
                </ul>
            </div>
        </div>

        <div class="content-section hidden" id="faq-section">
            <h2>ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰æ®‹ã‚¯ãƒ¬ã€ã‚ˆãã‚ã‚‹ç–‘å•ã‚’è§£æ±ºï¼</h2>
            <div class="info-panel">
                <h3>Q: æ®‹ä¾¡ç‡ã¯ã©ã†ã‚„ã£ã¦æ±ºã¾ã‚‹ã®ï¼Ÿ</h3>
                <p>A: æ–°è»Šæ™‚ã®è»Šä¸¡æœ¬ä½“ä¾¡æ ¼ã«å¯¾ã—ã¦ã€å°†æ¥ã®å¸‚å ´ä¾¡å€¤ã‚’äºˆæ¸¬ã—ã¦è¨­å®šã•ã‚Œã¾ã™ã€‚ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰ã¯äººæ°—ãŒé«˜ã„ãŸã‚ã€æ¯”è¼ƒçš„é«˜ã„æ®‹ä¾¡ç‡ãŒè¨­å®šã•ã‚Œã‚„ã™ã„å‚¾å‘ã«ã‚ã‚Šã¾ã™ã€‚</p>
            </div>
            <div class="info-panel">
                <h3>Q: é‡‘åˆ©ã£ã¦ã©ã‚Œãã‚‰ã„ã‹ã‹ã‚‹ã®ï¼Ÿ</h3>
                <p>A: ä¸€èˆ¬çš„ãªãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®æ®‹ã‚¯ãƒ¬é‡‘åˆ©ã¯ã€é€šå¸¸ã®ãƒã‚¤ã‚«ãƒ¼ãƒ­ãƒ¼ãƒ³ã¨æ¯”è¼ƒã—ã¦ã‚„ã‚„é«˜ã‚ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€æœˆã€…ã®æ”¯æ‰•é¡ã‚’æŠ‘ãˆã‚‰ã‚Œã‚‹ãƒ¡ãƒªãƒƒãƒˆã¨ç·åˆçš„ã«åˆ¤æ–­ã—ã¾ã—ã‚‡ã†ã€‚</p>
            </div>
            <div class="info-panel">
                <h3>Q: äº‹æ•…ã§è»ŠãŒå‚·ã¤ã„ãŸã‚‰ã©ã†ãªã‚‹ï¼Ÿ</h3>
                <p>A: è¿”å´æ™‚ã‚„ä¹—ã‚Šæ›ãˆæ™‚ã«ã€è¦å®šä»¥ä¸Šã®æå‚·ãŒã‚ã‚‹å ´åˆã¯ä¿®ç†è²»ç”¨ãªã©ãŒè«‹æ±‚ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ä¸‡ä¸€ã«å‚™ãˆã¦è»Šä¸¡ä¿é™ºã¸ã®åŠ å…¥ã‚’å¼·ããŠã™ã™ã‚ã—ã¾ã™ã€‚</p>
            </div>
            <div class="info-panel">
                <h3>Q: é€”ä¸­ã§æ®‹ã‚¯ãƒ¬ã‚’è§£ç´„ã§ãã‚‹ï¼Ÿ</h3>
                <p>A: åŸå‰‡ã¨ã—ã¦æ®‹ã‚¯ãƒ¬å¥‘ç´„ã¯ä¸­é€”è§£ç´„ã§ãã¾ã›ã‚“ã€‚ãŸã ã—ã€ã©ã†ã—ã¦ã‚‚è§£ç´„ãŒå¿…è¦ãªå ´åˆã¯ã€æ®‹ã‚Šã®ãƒ­ãƒ¼ãƒ³æ®‹é«˜ã‚’ä¸€æ‹¬ç²¾ç®—ã—ãŸã‚Šã€è²·å–å°‚é–€åº—ã«å£²å´ã—ã¦æ®‹å‚µã‚’æ¸…ç®—ã™ã‚‹ãªã©ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚</p>
            </div>
            <div class="info-panel">
                <h3>ğŸ’¡ ã‚‚ã£ã¨è©³ã—ãçŸ¥ã‚ŠãŸã„ï¼Ÿ</h3>
                <p>æ®‹ã‚¯ãƒ¬ã«ã¤ã„ã¦ã•ã‚‰ã«ç–‘å•ãŒã‚ã‚‹å ´åˆã¯ã€<a href="https://toyota.jp/request/credit/alphard/" target="_blank">ãƒˆãƒ¨ã‚¿å…¬å¼ã‚µã‚¤ãƒˆ</a>ã‚„ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚</p>
            </div>
        </div>

        <footer>
            <p>&copy; 2025 ALPHARD SmartBuy. All Rights Reserved.</p>
            <p>ã“ã®ã‚¢ãƒ—ãƒªã¯ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰ã®æ®‹ã‚¯ãƒ¬è³¼å…¥æ¤œè¨ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€å®Ÿéš›ã®å¥‘ç´„å†…å®¹ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚è©³ç´°ãªæƒ…å ±ã¯è²©å£²åº—ã§ã”ç¢ºèªãã ã•ã„ã€‚</p>
            <p>â€»æ²è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰ã®ç”»åƒã¯ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚</p>
        </footer>
    </div>

    <script>
        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆ‡ã‚Šæ›¿ãˆå‡¦ç†
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault(); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¢ãƒ³ã‚«ãƒ¼ãƒªãƒ³ã‚¯å‹•ä½œã‚’ç„¡åŠ¹åŒ–

                // ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹
                document.querySelectorAll('.content-section').forEach(section => {
                    section.classList.add('hidden');
                });
                // ã™ã¹ã¦ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’è§£é™¤
                document.querySelectorAll('nav a').forEach(navLink => {
                    navLink.classList.remove('active');
                });

                // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸãƒªãƒ³ã‚¯ã«å¯¾å¿œã™ã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹
                const targetId = this.getAttribute('href').substring(1) + '-section';
                document.getElementById(targetId).classList.remove('hidden');
                // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸãƒªãƒ³ã‚¯ã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
                this.classList.add('active');

                // ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                document.getElementById(targetId).scrollIntoView({ behavior: 'smooth' });
            });
        });

        // é‡‘åˆ©ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤è¡¨ç¤ºã‚’æ›´æ–°
        document.getElementById('interestRate').addEventListener('input', function() {
            document.getElementById('interestRateValue').textContent = this.value;
        });

        // æ®‹ã‚¯ãƒ¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç°¡æ˜“ç‰ˆã€æ­£ç¢ºæ€§ã¯å•ã‚ãªã„ï¼‰
        function calculateResidualCredit() {
            const carPrice = parseFloat(document.getElementById('carPrice').value) * 10000; // ä¸‡å††ã‚’å††ã«å¤‰æ›
            const downPayment = parseFloat(document.getElementById('downPayment').value) * 10000;
            const bonusPayment = parseFloat(document.getElementById('bonusPayment').value) * 10000;
            const term = parseInt(document.getElementById('term').value); // years
            const interestRate = parseFloat(document.getElementById('interestRate').value) / 100; // as decimal

            if (isNaN(carPrice) || isNaN(downPayment) || isNaN(bonusPayment) || isNaN(term) || isNaN(interestRate) || carPrice <= 0) {
                alert('å…¨ã¦ã®é …ç›®ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ï¼');
                return;
            }

            // ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ãƒ‰ã®æ®‹ä¾¡ç‡ã‚’å¤§èƒ†ã«è¨­å®šï¼ˆæƒ³åƒä¸Šã®ãƒ‡ãƒ¼ã‚¿ï¼‰
            let residualRate;
            if (term === 3) {
                residualRate = 0.70; // 3å¹´å¾Œã‚‚è¶…é«˜å€¤ï¼
            } else if (term === 5) {
                residualRate = 0.58; // 5å¹´å¾Œã‚‚ã¾ã ã¾ã äººæ°—ï¼
            } else {
                residualRate = 0.60; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
            }

            const residualValue = carPrice * residualRate;
            let principalForLoan = carPrice - downPayment - residualValue;
            const numberOfPayments = term * 12; // æœˆã€…ã®æ”¯æ‰•ã„å›æ•°

            // ãƒœãƒ¼ãƒŠã‚¹æ‰•ã„ã‚’å¹´é–“2å›ã¨ä»®å®šã—ã€å…ƒé‡‘ã‹ã‚‰å·®ã—å¼•ãã“ã¨ã§æœˆã€…ã®è² æ‹…ã‚’è»½æ¸›ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç°¡æ˜“ï¼‰
            const totalBonusPayments = bonusPayment * 2 * term;
            principalForLoan -= totalBonusPayments; // æœˆã€…ã®æ”¯æ‰•ã„ã®å¯¾è±¡ã¨ãªã‚‹å…ƒé‡‘ã‚’èª¿æ•´

            let monthlyPayment = 0;
            if (interestRate === 0) {
                monthlyPayment = principalForLoan / numberOfPayments;
            } else {
                const monthlyInterestRate = interestRate / 12;
                // å…ƒåˆ©å‡ç­‰æ–¹å¼ã®è¨ˆç®—ï¼ˆèª¿æ•´å¾Œã®å…ƒé‡‘ã«å¯¾ã—ã¦ï¼‰
                // æ”¯æ‰•ã„å…ƒé‡‘ãŒãƒã‚¤ãƒŠã‚¹ã«ãªã‚‹å ´åˆã¯ã€æœˆã€…æ”¯æ‰•ã„ã¯0ã¨ã™ã‚‹
                if (principalForLoan > 0) {
                     monthlyPayment = principalForLoan * monthlyInterestRate * Math.pow(1 + monthlyInterestRate, numberOfPayments) / (Math.pow(1 + monthlyInterestRate, numberOfPayments) - 1);
                } else {
                    monthlyPayment = 0;
                }
            }

            // ç·æ”¯æ‰•é¡ã®ç®—å‡ºï¼ˆä»Šå›ã¯ã€Œè²·ã„å–ã‚‹å ´åˆã€ã‚’æƒ³å®šã—ãŸæ¦‚ç®—ï¼‰
            // é ­é‡‘ + æœˆã€…ã®æ”¯æ‰•ã„ç·é¡ + ãƒœãƒ¼ãƒŠã‚¹æ‰•ã„ç·é¡ + æ®‹ä¾¡ï¼ˆè²·ã„å–ã‚‹å ´åˆï¼‰ + æ®‹ä¾¡ã«ã‹ã‹ã‚‹ç°¡æ˜“é‡‘åˆ©
            // æ®‹ä¾¡ã«ã‹ã‹ã‚‹é‡‘åˆ©ã‚‚æœˆã€…ã®é‡‘åˆ©ã¨åŒã˜ã¨ä»®å®šï¼ˆå®Ÿéš›ã®æ®‹ã‚¯ãƒ¬ã¨ã¯ç•°ãªã‚Šã¾ã™ï¼‰
            const totalInterestOnResidual = residualValue * interestRate * (term); // ç°¡æ˜“çš„ãªè¨ˆç®—
            const totalPayment = downPayment + (monthlyPayment * numberOfPayments) + totalBonusPayments + residualValue + totalInterestOnResidual;


            document.getElementById('monthlyPayment').textContent = Math.round(monthlyPayment).toLocaleString();
            document.getElementById('residualValue').textContent = Math.round(residualValue).toLocaleString();
            document.getElementById('totalPayment').textContent = Math.round(totalPayment).toLocaleString();
            document.getElementById('resultBox').classList.remove('hidden'); // çµæœè¡¨ç¤ºã‚’å¯è¦–åŒ–
            document.getElementById('resultBox').scrollIntoView({ behavior: 'smooth' }); // çµæœã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        }
    </script>
</body>
</html>